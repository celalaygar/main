<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senior Developer Mülakat Soruları</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .category-card {
            transition: all 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
        }

        .question-card {
            transition: all 0.3s ease;
        }

        .answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .answer.active {
            max-height: 2000px;
        }

        .rotate-icon {
            transition: transform 0.3s ease;
        }

        .rotate-icon.active {
            transform: rotate(180deg);
        }
        
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        
        .dark-mode .text-gray-800 {
            color: #e2e8f0;
        }
        
        .dark-mode .text-gray-600 {
            color: #cbd5e0;
        }
        
        .dark-mode .border-gray-200 {
            border-color: #4a5568;
        }
        
        .dark-mode .bg-gray-50 {
            background-color: #2d3748;
        }
        
        .dark-mode .bg-blue-50 {
            background-color: #2c5282;
        }
        
        .dark-mode .bg-green-50 {
            background-color: #276749;
        }
        
        .dark-mode .bg-yellow-50 {
            background-color: #975a16;
        }
        
        .dark-mode .bg-purple-50 {
            background-color: #553c9a;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h1 class="text-3xl font-bold">Senior Developer Mülakat Soruları</h1>
                    <p class="text-blue-100 mt-2">Docker, Kubernetes, Kafka, Redis, ElasticSearch ve Spring Boot</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Ara..."
                            class="px-4 py-2 rounded-lg bg-blue-500 text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-300 w-64">
                        <i class="fas fa-search absolute right-3 top-3 text-blue-200"></i>
                    </div>
                    <button id="toggleDarkMode" class="p-2 rounded-full bg-blue-500 hover:bg-blue-400">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Category Filter -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Kategoriler</h2>
            <div class="flex flex-wrap gap-2" id="categoryFilter">
                <button class="category-btn px-4 py-2 rounded-full bg-blue-600 text-white font-medium"
                    data-category="all">Tümü</button>
                <button
                    class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300"
                    data-category="docker">Docker & Kubernetes</button>
                <button
                    class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300"
                    data-category="kafka">Kafka</button>
                <button
                    class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300"
                    data-category="redis">Redis</button>
                <button
                    class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300"
                    data-category="elasticsearch">ElasticSearch</button>
                <button
                    class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300"
                    data-category="spring">Spring Boot & Core</button>
                <button
                    class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300"
                    data-category="springcloud">Spring Cloud & Microservices</button>
            </div>
        </div>

        <!-- Questions Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="questionsContainer">
            <!-- Docker & Kubernetes Category -->
            <div class="category-card bg-white rounded-xl shadow-md overflow-hidden" data-category="docker">
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-4">
                    <h3 class="text-xl font-bold text-white flex items-center">
                        <i class="fab fa-docker mr-2"></i> Docker & Kubernetes
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <!-- Question 1 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Docker imajı ile container arasındaki fark nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>İmaj:</strong> Uygulamanın çalışması için gerekli dosya ve bağımlılıkların şablonu.</p>
                                <p><strong>Container:</strong> İmajın runtime hali, izole ortamda çalışan uygulama.</p>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Dockerfile optimize etmenin yolları nelerdir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Multi-stage build kullanmak</li>
                                    <li>Gereksiz layer'ları azaltmak</li>
                                    <li>Minimal base image kullanmak (Alpine)</li>
                                    <li>Cache kullanımını optimize etmek</li>
                                </ul>
                                <p class="mt-2">Örnek multi-stage Dockerfile:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
FROM maven:3.9.0 AS build
WORKDIR /app
COPY pom.xml .
COPY src ./src
RUN mvn clean package

FROM openjdk:17-jdk-slim
COPY --from=build /app/target/app.jar /app/app.jar
CMD ["java","-jar","/app/app.jar"]</pre>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes pod nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Kubernetes'te çalıştırılabilen en küçük deployable birim. İçinde bir veya birden fazla container olabilir.</p>
                                <p class="mt-2">Örnek Pod YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: nginx:latest
    ports:
    - containerPort: 80</pre>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Deployment ve StatefulSet farkı nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Deployment:</strong> Stateless servisler için, pod'lar eşit ve değiştirilebilir</p>
                                <p><strong>StatefulSet:</strong> Stateful servisler için, persistent storage ve ordered deployment sağlar</p>
                                <p class="mt-2">Örnek Deployment YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
      - name: my-app
        image: my-app:1.0
        ports:
        - containerPort: 8080</pre>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes'te Service tipi ve farkları</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>ClusterIP:</strong> Sadece cluster içi erişim</li>
                                    <li><strong>NodePort:</strong> Dışarıdan belirli port üzerinden erişim</li>
                                    <li><strong>LoadBalancer:</strong> Cloud provider üzerinden load balancing</li>
                                    <li><strong>ExternalName:</strong> DNS tabanlı alias</li>
                                </ul>
                                <p class="mt-2">Örnek Service YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  selector:
    app: my-app
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
  type: LoadBalancer</pre>
                            </div>
                        </div>

                        <!-- Question 6 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ConfigMap ve Secret farkı nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>ConfigMap:</strong> Plaintext konfig verisi</p>
                                <p><strong>Secret:</strong> Şifreli/ hassas veri</p>
                                <p>Hem pod container'larına mount edilebilir veya env variable olarak kullanılabilir</p>
                                <p class="mt-2">Örnek ConfigMap:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-config
data:
  database_url: "jdbc:postgresql://db:5432/mydb"</pre>
                                <p class="mt-2">Örnek Secret:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: v1
kind: Secret
metadata:
  name: my-secret
type: Opaque
data:
  password: cGFzc3dvcmQxMjM=  # base64 encoded "password123"</pre>
                            </div>
                        </div>

                        <!-- Question 7 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Liveness ve Readiness probe farkı</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Liveness:</strong> Pod canlı mı?</p>
                                <p><strong>Readiness:</strong> Pod trafiği alabilir durumda mı?</p>
                                <p class="mt-2">Örnek Probe kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 10
readinessProbe:
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 5</pre>
                            </div>
                        </div>

                        <!-- Question 8 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Docker volume ile bind mount farkı</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Volume:</strong> Docker tarafından yönetilir, container bağımsız</p>
                                <p><strong>Bind mount:</strong> Host filesystem'e direkt bağlı</p>
                                <p class="mt-2">Volume kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
docker run -d -v mydata:/app/data nginx</pre>
                                <p class="mt-2">Bind mount kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
docker run -d -v /host/path:/container/path nginx</pre>
                            </div>
                        </div>

                        <!-- Question 9 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Docker networking tipi ve kullanımı</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>bridge:</strong> Default, container'lar host üzerinde izole</li>
                                    <li><strong>host:</strong> Host network kullanır</li>
                                    <li><strong>overlay:</strong> Swarm veya multi-host network</li>
                                </ul>
                                <p class="mt-2">Örnek bridge network oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
docker network create my-network
docker run -d --name container1 --network my-network nginx
docker run -d --name container2 --network my-network redis</pre>
                            </div>
                        </div>

                        <!-- Question 10 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes Horizontal Pod Autoscaler nasıl çalışır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>CPU/memory veya custom metrics bazlı pod sayısını otomatik arttırır veya azaltır</p>
                                <p class="mt-2">Örnek HPA YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: my-app-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: my-app
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 50</pre>
                            </div>
                        </div>

                        <!-- Question 11 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes DaemonSet nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Her node üzerinde pod çalıştırmak için kullanılır. Örneğin log collection, monitoring gibi servisler için idealdir.</p>
                                <p class="mt-2">Örnek DaemonSet YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: fluentd-logging
spec:
  selector:
    matchLabels:
      name: fluentd-logging
  template:
    metadata:
      labels:
        name: fluentd-logging
    spec:
      containers:
      - name: fluentd
        image: fluent/fluentd:v1.16</pre>
                            </div>
                        </div>

                        <!-- Question 12 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes Job vs CronJob</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Job:</strong> Tek seferlik task'lar için kullanılır. Tamamlandığında pod'lar sonlandırılır.</p>
                                <p><strong>CronJob:</strong> Belirli zaman aralıklarında tekrarlanan task'lar için kullanılır.</p>
                                <p class="mt-2">Örnek Job YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: batch/v1
kind: Job
metadata:
  name: my-job
spec:
  template:
    spec:
      containers:
      - name: my-job
        image: busybox
        command: ["echo", "Hello Kubernetes"]
      restartPolicy: Never</pre>
                                <p class="mt-2">Örnek CronJob YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: batch/v1
kind: CronJob
metadata:
  name: my-cronjob
spec:
  schedule: "*/1 * * * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: my-cronjob
            image: busybox
            command: ["echo", "Hello every minute"]
          restartPolicy: OnFailure</pre>
                            </div>
                        </div>

                        <!-- Question 13 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes Ingress nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>HTTP/HTTPS trafiğini pod'lara yönlendirir. Load balancer ve path routing sağlar.</p>
                                <p class="mt-2">Örnek Ingress YAML:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
  - http:
      paths:
      - path: /app
        pathType: Prefix
        backend:
          service:
            name: my-service
            port:
              number: 80</pre>
                            </div>
                        </div>

                        <!-- Question 14 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes namespace ve RBAC kullanımı</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Namespace:</strong> İzolasyon, resource quota</p>
                                <p><strong>RBAC:</strong> Rol tabanlı erişim kontrolü</p>
                                <p class="mt-2">Örnek Namespace oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: v1
kind: Namespace
metadata:
  name: my-namespace</pre>
                                <p class="mt-2">Örnek Role ve RoleBinding:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: my-namespace
  name: pod-reader
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "watch", "list"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods
  namespace: my-namespace
subjects:
- kind: User
  name: jane
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io</pre>
                            </div>
                        </div>

                        <!-- Question 15 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kubernetes Persistent Volume vs Persistent Volume Claim</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>PV:</strong> Depolama kaynağı</p>
                                <p><strong>PVC:</strong> Pod'un talep ettiği depolama</p>
                                <p class="mt-2">Örnek Persistent Volume:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: v1
kind: PersistentVolume
metadata:
  name: my-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  hostPath:
    path: /mnt/data</pre>
                                <p class="mt-2">Örnek Persistent Volume Claim:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kafka Category -->
            <div class="category-card bg-white rounded-xl shadow-md overflow-hidden" data-category="kafka">
                <div class="bg-gradient-to-r from-green-500 to-green-600 p-4">
                    <h3 class="text-xl font-bold text-white flex items-center">
                        <i class="fas fa-stream mr-2"></i> Kafka
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <!-- Question 1 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka topic, partition ve offset nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Topic:</strong> Mesajların kategorisi</p>
                                <p><strong>Partition:</strong> Paralel işleme birimi</p>
                                <p><strong>Offset:</strong> Partition'daki mesaj sırası</p>
                                <p class="mt-2">Topic oluşturma komutu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
kafka-topics.sh --create --topic my-topic \
  --bootstrap-server localhost:9092 \
  --partitions 3 \
  --replication-factor 2</pre>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka'da producer ack seviyeleri</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>acks=0:</strong> fire-and-forget</li>
                                    <li><strong>acks=1:</strong> leader commit</li>
                                    <li><strong>acks=all:</strong> leader + replica commit (güvenli)</li>
                                </ul>
                                <p class="mt-2">Producer konfigürasyon örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
Properties props = new Properties();
props.put("bootstrap.servers", "localhost:9092");
props.put("acks", "all");
props.put("retries", 3);
props.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");
props.put("value.serializer", "org.apache.kafka.common.serialization.StringSerializer");

Producer<String, String> producer = new KafkaProducer<>(props);</pre>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka consumer group nasıl çalışır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Partition'lar consumer'lara dağıtılır. Consumer sayısı > partition → fazla consumer idle olur.</p>
                                <p class="mt-2">Consumer konfigürasyon örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
Properties props = new Properties();
props.put("bootstrap.servers", "localhost:9092");
props.put("group.id", "my-consumer-group");
props.put("enable.auto.commit", "true");
props.put("auto.commit.interval.ms", "1000");
props.put("key.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");
props.put("value.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");

KafkaConsumer<String, String> consumer = new KafkaConsumer<>(props);
consumer.subscribe(Arrays.asList("my-topic"));</pre>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka'da exactly-once delivery nasıl sağlanır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Idempotent producer + transactional producer</li>
                                    <li>Consumer read_committed kullanmalı</li>
                                </ul>
                                <p class="mt-2">Transactional producer örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
props.put("enable.idempotence", "true");
props.put("transactional.id", "my-transactional-id");
Producer<String, String> producer = new KafkaProducer<>(props);

producer.initTransactions();
try {
    producer.beginTransaction();
    // Mesajları gönder
    producer.send(new ProducerRecord<>("my-topic", "key", "value"));
    producer.commitTransaction();
} catch (ProducerFencedException | OutOfOrderSequenceException | AuthorizationException e) {
    producer.close();
} catch (KafkaException e) {
    producer.abortTransaction();
}</pre>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka vs RabbitMQ farkları</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Kafka:</strong> event streaming, high throughput, log based</p>
                                <p><strong>RabbitMQ:</strong> queue-based, message acknowledgement, transactional</p>
                                <table class="mt-2 w-full text-sm">
                                    <tr class="bg-gray-100">
                                        <th class="p-2 text-left">Özellik</th>
                                        <th class="p-2 text-left">Kafka</th>
                                        <th class="p-2 text-left">RabbitMQ</th>
                                    </tr>
                                    <tr>
                                        <td class="p-2">Mimari</td>
                                        <td class="p-2">Log tabanlı</td>
                                        <td class="p-2">Kuyruk tabanlı</td>
                                    </tr>
                                    <tr class="bg-gray-50">
                                        <td class="p-2">Mesaj Sıralaması</td>
                                        <td class="p-2">Partition içinde sıralı</td>
                                        <td class="p-2">Kuyruk içinde sıralı</td>
                                    </tr>
                                    <tr>
                                        <td class="p-2">Performans</td>
                                        <td class="p-2">Yüksek verimlilik</td>
                                        <td class="p-2">Orta seviye</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <!-- Question 6 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka'da backpressure ve flow control nasıl sağlanır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Consumer lag monitoring</li>
                                    <li>Reactive Kafka / Reactor kullanarak reactive backpressure</li>
                                    <li>Batch tüketim ve commit ile kontrol</li>
                                </ul>
                                <p class="mt-2">Reactive Kafka ile backpressure örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
Flux<ConsumerRecord<String, String>> kafkaFlux = KafkaReceiver.create(receiverOptions)
    .receive()
    .onBackpressureBuffer(1000) // Buffer boyutu
    .concatMap(record -> {
        // Mesaj işleme
        return processRecord(record)
            .doOnSuccess(v -> record.receiverOffset().acknowledge());
    });</pre>
                            </div>
                        </div>

                        <!-- Question 7 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka topic retention nasıl ayarlanır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>retention.ms veya retention.bytes ile</p>
                                <p>Log segment ve cleanup policy (delete, compact) belirlenir</p>
                                <p class="mt-2">Topic retention ayarlama komutu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
kafka-configs.sh --bootstrap-server localhost:9092 \
  --entity-type topics --entity-name my-topic \
  --alter --add-config retention.ms=604800000</pre>
                                <p class="mt-2">Topic oluştururken retention ayarlama:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
kafka-topics.sh --create --topic my-topic \
  --bootstrap-server localhost:9092 \
  --partitions 3 --replication-factor 2 \
  --config retention.ms=604800000 \
  --config cleanup.policy=compact</pre>
                            </div>
                        </div>

                        <!-- Question 8 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka consumer lag nasıl izlenir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Kafka tools veya Prometheus metrics ile</p>
                                <p>Lag = latest offset - committed offset</p>
                                <p class="mt-2">Consumer lag kontrolü komutu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --describe --group my-consumer-group</pre>
                                <p class="mt-2">Çıktı örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG
my-consumer-group my-topic       0          1500            2000            500
my-consumer-group my-topic       1          3000            3000            0
my-consumer-group my-topic       2          1000            2500            1500</pre>
                            </div>
                        </div>

                        <!-- Question 9 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka ile Redis birlikte nasıl kullanılır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Kafka → event source</li>
                                    <li>Redis → cache / subscriber notify</li>
                                    <li>Event-driven, low latency integration</li>
                                </ul>
                                <p class="mt-2">Kafka consumer ve Redis entegrasyon örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@KafkaListener(topics = "events")
public void handleEvent(Event event) {
    // Kafka'dan gelen event'i işle
    String cacheKey = "event:" + event.getId();
    
    // Redis cache'e yaz
    redisTemplate.opsForValue().set(cacheKey, event, 10, TimeUnit.MINUTES);
    
    // Redis pub/sub ile bildir
    redisTemplate.convertAndSend("events:notifications", event);
}</pre>
                            </div>
                        </div>

                        <!-- Question 10 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka MirrorMaker ne için kullanılır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Cluster'lar arası topic replication</p>
                                <p>Disaster recovery ve multi-datacenter replication</p>
                                <p class="mt-2">MirrorMaker konfigürasyon örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# Source cluster
bootstrap.servers=source-kafka:9092

# Target cluster
bootstrap.servers.target=target-kafka:9092

# Topics to replicate
topics=my-topic-1,my-topic-2</pre>
                                <p class="mt-2">MirrorMaker çalıştırma komutu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
bin/kafka-mirror-maker.sh \
  --consumer.config source-cluster.config \
  --producer.config target-cluster.config \
  --whitelist "my-topic-.*"</pre>
                            </div>
                        </div>

                        <!-- Question 11 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka Streams nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Kafka Streams, Kafka tabanlı veri akışlarını işlemek için kullanılan bir kütüphanedir. Gerçek zamanlı veri işleme, dönüşüm ve analiz için kullanılır.</p>
                                <p class="mt-2">Kafka Streams örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
Properties props = new Properties();
props.put(StreamsConfig.APPLICATION_ID_CONFIG, "wordcount-application");
props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, "localhost:9092");
props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());
props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass());

StreamsBuilder builder = new StreamsBuilder();
KStream<String, String> textLines = builder.stream("text-input");
KTable<String, Long> wordCounts = textLines
    .flatMapValues(textLine -> Arrays.asList(textLine.toLowerCase().split(" ")))
    .groupBy((key, word) -> word)
    .count();

wordCounts.toStream().to("word-count-output", Produced.with(Serdes.String(), Serdes.Long()));

KafkaStreams streams = new KafkaStreams(builder.build(), props);
streams.start();</pre>
                            </div>
                        </div>

                        <!-- Question 12 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka'da consumer rebalance ne zaman olur?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Consumer rebalance, partition'ların consumer'lar arasında yeniden dağıtılması işlemidir. Aşağıdaki durumlarda gerçekleşir:</p>
                                <ul class="list-disc pl-5 space-y-1 mt-2">
                                    <li>Yeni bir consumer gruba katıldığında</li>
                                    <li>Bir consumer gruptan ayrıldığında veya çöktüğünde</li>
                                    <li>Topic'teki partition sayısı değiştiğinde</li>
                                </ul>
                                <p class="mt-2">Rebalance sırasında consumer'lar geçici olarak veri işleyemez. Bu durumu minimize etmek için:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Session timeout ayarını artırarak gereksiz rebalance'ları azaltabilirsiniz
props.put("session.timeout.ms", "30000");

// Heartbeat interval ayarını da buna göre ayarlayın
props.put("heartbeat.interval.ms", "10000");</pre>
                            </div>
                        </div>

                        <!-- Question 13 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka'da partition sayısını belirlerken nelere dikkat edilmeli?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>Throughput:</strong> Daha fazla partition, daha yüksek paralel işleme sağlar</li>
                                    <li><strong>Consumer sayısı:</strong> Partition sayısı, consumer sayısından az olmamalıdır</li>
                                    <li><strong>File descriptor limit:</strong> Her partition için broker'da dosya tanımlayıcıları kullanılır</li>
                                    <li><strong>Replication:</strong> Her partition için replica'lar kaynak tüketir</li>
                                </ul>
                                <p class="mt-2">Partition sayısı hesaplama formülü:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Hedef throughput (MB/s)
double targetThroughput = 10.0;

// Tek partition'ın maksimum throughput'u (MB/s)
double maxPartitionThroughput = 2.0;

// Gerekli partition sayısı
int partitionCount = (int) Math.ceil(targetThroughput / maxPartitionThroughput);

// Consumer sayısı kadar partition olmalı
partitionCount = Math.max(partitionCount, consumerCount);</pre>
                            </div>
                        </div>

                        <!-- Question 14 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka Connect nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Kafka Connect, Kafka ile diğer sistemler arasında veri akışı sağlamak için kullanılan bir araçtır. Source ve Sink connector'ları ile veri aktarımı yapar.</p>
                                <p class="mt-2">JDBC Source Connector örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
{
  "name": "jdbc-source-connector",
  "config": {
    "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
    "connection.url": "jdbc:postgresql://db:5432/mydb",
    "connection.user": "user",
    "connection.password": "password",
    "mode": "bulk",
    "topic.prefix": "jdbc-",
    "table.whitelist": "users,products"
  }
}</pre>
                                <p class="mt-2">Elasticsearch Sink Connector örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
{
  "name": "elasticsearch-sink-connector",
  "config": {
    "connector.class": "io.confluent.connect.elasticsearch.ElasticsearchSinkConnector",
    "tasks.max": "1",
    "topics": "users,products",
    "connection.url": "http://elasticsearch:9200",
    "type.name": "_doc",
    "key.ignore": "true"
  }
}</pre>
                            </div>
                        </div>

                        <!-- Question 15 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Kafka'da Schema Registry nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Schema Registry, Kafka'daki veri şemalarını (Avro, Protobuf, JSON Schema) yönetmek için kullanılan bir servistir. Veri uyumluluğunu sağlar ve evrimini yönetir.</p>
                                <p class="mt-2">Avro şeması örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
{
  "type": "record",
  "name": "User",
  "fields": [
    {"name": "id", "type": "int"},
    {"name": "name", "type": "string"},
    {"name": "email", "type": ["null", "string"], "default": null}
  ]
}</pre>
                                <p class="mt-2">Schema Registry ile producer örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
Properties props = new Properties();
props.put("bootstrap.servers", "localhost:9092");
props.put("schema.registry.url", "http://localhost:8081");
props.put("key.serializer", "io.confluent.kafka.serializers.KafkaAvroSerializer");
props.put("value.serializer", "io.confluent.kafka.serializers.KafkaAvroSerializer");

KafkaProducer<Integer, User> producer = new KafkaProducer<>(props);

User user = User.newBuilder()
    .setId(1)
    .setName("John Doe")
    .setEmail("john@example.com")
    .build();

producer.send(new ProducerRecord<>("users", user.getId(), user));</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Redis Category -->
            <div class="category-card bg-white rounded-xl shadow-md overflow-hidden" data-category="redis">
                <div class="bg-gradient-to-r from-red-500 to-red-600 p-4">
                    <h3 class="text-xl font-bold text-white flex items-center">
                        <i class="fas fa-database mr-2"></i> Redis
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <!-- Question 1 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis hangi veri tiplerini destekler?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>String, Hash, List, Set, Sorted Set, HyperLogLog, Bitmap, Stream</p>
                                <p class="mt-2">Veri tipleri ve kullanım örnekleri:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// String
SET user:1000:name "John Doe"
GET user:1000:name

// Hash
HSET user:1000 name "John Doe" email "john@example.com"
HGET user:1000 name

// List
LPUSH users "John"
LPUSH users "Jane"
LRANGE users 0 -1

// Set
SADD admins "John"
SADD admins "Jane"
SMEMBERS admins

// Sorted Set
ZADD leaderboard 100 "player1"
ZADD leaderboard 200 "player2"
ZRANGE leaderboard 0 -1 WITHSCORES

// Bitmap
SETBIT user:1000:flags 1 1
GETBIT user:1000:flags 1

// Stream
XADD user_events * name signup user_id 1000
XRANGE user_events - +</pre>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis'i caching dışında nasıl kullanırsınız?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Session store</li>
                                    <li>Rate limiting (token bucket)</li>
                                    <li>Pub/Sub messaging</li>
                                    <li>Distributed locks</li>
                                </ul>
                                <p class="mt-2">Rate limiting örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Token Bucket algoritması ile rate limiting
// Her kullanıcı için dakikada 10 istek limiti
function rateLimit(userId) {
    const key = `rate_limit:${userId}`;
    const limit = 10;
    const window = 60; // saniye
    
    // Mevcut değeri al veya 0 olarak ayarla
    const current = redis.call('GET', key) || 0;
    
    if (parseInt(current) >= limit) {
        return false; // Limit aşıldı
    }
    
    // Değeri artır ve TTL ayarla
    redis.call('INCR', key);
    redis.call('EXPIRE', key, window);
    
    return true; // İzin verildi
}</pre>
                                <p class="mt-2">Distributed lock örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// SET key value NX PX <timeout> ile distributed lock
function acquireLock(lockName, timeout) {
    const uniqueId = Math.random().toString(36).substring(2, 15);
    const result = redis.call('SET', lockName, uniqueId, 'NX', 'PX', timeout);
    
    if (result === 'OK') {
        return uniqueId; // Lock alındı
    }
    
    return null; // Lock alınamadı
}

function releaseLock(lockName, uniqueId) {
    // Sadece sahibi lock'u release edebilir
    const script = `
        if redis.call("GET", KEYS[1]) == ARGV[1] then
            return redis.call("DEL", KEYS[1])
        else
            return 0
        end
    `;
    
    return redis.call('EVAL', script, 1, lockName, uniqueId);
}</pre>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis Cluster ve Sentinel farkı</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Sentinel:</strong> HA, failover</p>
                                <p><strong>Cluster:</strong> sharding + HA, scale-out</p>
                                <p class="mt-2">Redis Sentinel yapılandırma örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# sentinel.conf
port 26379
sentinel monitor mymaster 127.0.0.1 6379 2
sentinel down-after-milliseconds mymaster 5000
sentinel failover-timeout mymaster 10000
sentinel parallel-syncs mymaster 1</pre>
                                <p class="mt-2">Redis Cluster yapılandırma örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# redis.conf
port 7000
cluster-enabled yes
cluster-config-file nodes-7000.conf
cluster-node-timeout 5000
appendonly yes</pre>
                                <p class="mt-2">Cluster oluşturma komutu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
redis-cli --cluster create 127.0.0.1:7000 127.0.0.1:7001 \
  127.0.0.1:7002 127.0.0.1:7003 127.0.0.1:7004 127.0.0.1:7005 \
  --cluster-replicas 1</pre>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis persistence seçenekleri</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>RDB:</strong> snapshot, scheduled saves</li>
                                    <li><strong>AOF:</strong> append-only log, every write recorded</li>
                                    <li><strong>Hybrid:</strong> RDB + AOF</li>
                                </ul>
                                <p class="mt-2">RDB yapılandırma örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# redis.conf
save 900 1     # 900 saniyede en az 1 değişiklik olursa kaydet
save 300 10    # 300 saniyede en az 10 değişiklik olursa kaydet
save 60 10000  # 60 saniyede en az 10000 değişiklik olursa kaydet

rdbcompression yes
rdbchecksum yes
dbfilename dump.rdb
dir /var/lib/redis</pre>
                                <p class="mt-2">AOF yapılandırma örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# redis.conf
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec  # Her saniyede diske yaz
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis Streams nedir, avantajları</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Kafka benzeri event log. Consumer group desteği. Lightweight event-driven microservices için ideal.</p>
                                <p class="mt-2">Redis Streams kullanım örnekleri:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Stream'e mesaj ekleme
XADD user_events * name signup user_id 1000 timestamp 1625097600
XADD user_events * name login user_id 1000 timestamp 1625097660

// Stream'den mesaj okuma
XRANGE user_events - +  // Tüm mesajları oku
XREAD COUNT 2 STREAMS user_events 0  // İlk 2 mesajı oku

// Consumer group oluşturma
XGROUP CREATE user_events mygroup $ MKSTREAM

// Consumer group ile mesaj okuma
XREADGROUP GROUP mygroup consumer1 COUNT 1 STREAMS user_events >

// Mesaj işlendikten sonra onaylama
XACK user_events mygroup 1625097600000-0</pre>
                                <p class="mt-2">Spring Data Redis ile Streams kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class RedisConfig {
    @Bean
    public RedisMessageListenerContainer container(RedisConnectionFactory connectionFactory,
            MessageListenerAdapter listenerAdapter) {
        RedisMessageListenerContainer container = new RedisMessageListenerContainer();
        container.setConnectionFactory(connectionFactory);
        container.addMessageListener(listenerAdapter, new PatternTopic("user_events"));
        return container;
    }
    
    @Bean
    public StreamOperations<String, Object, Object> streamOperations(RedisTemplate<String, Object> redisTemplate) {
        return redisTemplate.opsForStream();
    }
}

@Service
public class EventService {
    @Autowired
    private StreamOperations<String, Object, Object> streamOperations;
    
    public void publishEvent(Event event) {
        MapRecord<String, Object, Object> record = StreamRecords.newRecord()
            .ofObject(event)
            .withStreamKey("user_events");
        streamOperations.add(record);
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 6 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis pub/sub ile Kafka farkı</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Redis:</strong> Hafif, memory tabanlı, persistence sınırlı</p>
                                <p><strong>Kafka:</strong> Yüksek throughput, disk tabanlı, offset management</p>
                                <table class="mt-2 w-full text-sm">
                                    <tr class="bg-gray-100">
                                        <th class="p-2 text-left">Özellik</th>
                                        <th class="p-2 text-left">Redis Pub/Sub</th>
                                        <th class="p-2 text-left">Kafka</th>
                                    </tr>
                                    <tr>
                                        <td class="p-2">Veri Kalıcılığı</td>
                                        <td class="p-2">Yok (offline subscriber'lar mesajları kaçırır)</td>
                                        <td class="p-2">Var (diskte saklanır)</td>
                                    </tr>
                                    <tr class="bg-gray-50">
                                        <td class="p-2">Mesaj Sıralama</td>
                                        <td class="p-2">Garanti edilmez</td>
                                        <td class="p-2">Partition içinde sıralı</td>
                                    </tr>
                                    <tr>
                                        <td class="p-2">Throughput</td>
                                        <td class="p-2">Yüksek (memory tabanlı)</td>
                                        <td class="p-2">Çok yüksek (disk tabanlı)</td>
                                    </tr>
                                    <tr class="bg-gray-50">
                                        <td class="p-2">Kullanım Alanı</td>
                                        <td class="p-2">Real-time bildirimler</td>
                                        <td class="p-2">Event sourcing, log processing</td>
                                    </tr>
                                </table>
                                <p class="mt-2">Redis Pub/Sub örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Publisher
PUBLISH notifications "Yeni mesajınız var"

// Subscriber
SUBSCRIBE notifications
// Mesaj geldiğinde: "message notifications channel Yeni mesajınız var"</pre>
                            </div>
                        </div>

                        <!-- Question 7 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis üzerinde memory yönetimi</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Maxmemory policy → volatile-lru, allkeys-lru, volatile-ttl</p>
                                <p>Eviction ile eski/unused keys temizlenir</p>
                                <p class="mt-2">Memory yapılandırma örnekleri:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# redis.conf
maxmemory 1gb

# Eviction politikaları
maxmemory-policy allkeys-lru  # En az kullanılan key'leri sil
# maxmemory-policy allkeys-lfu  # En az sık kullanılan key'leri sil
# maxmemory-policy volatile-lru  # Sadece TTL ayarlanmış key'ler arasında LRU
# maxmemory-policy volatile-ttl  # En yakın TTL'ye sahip key'leri sil

# Memory optimizasyon için hash-max-ziplist-entries
hash-max-ziplist-entries 512
hash-max-ziplist-value 64</pre>
                                <p class="mt-2">Memory kullanımını izleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Memory bilgilerini alma
INFO memory

// En büyük key'leri bulma
redis-cli --bigkeys

// Memory kullanımını analiz etme
redis-cli --memory usage key_name</pre>
                            </div>
                        </div>

                        <!-- Question 8 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis Cluster scaling</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Slot tabanlı sharding (16384 slot)</p>
                                <p>Yeni node ekleyerek linear scale</p>
                                <p class="mt-2">Cluster'a yeni node ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Yeni node'u cluster'a ekleme
redis-cli --cluster add-node 127.0.0.1:7006 127.0.0.1:7000

// Slot'ları yeni node'a yeniden dağıtma
redis-cli --cluster reshard 127.0.0.1:7000 \
  --cluster-from 1,2,3,4,5 \
  --cluster-to 6 \
  --cluster-slots 4096 \
  --cluster-yes</pre>
                                <p class="mt-2">Cluster bilgi komutları:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Cluster durumunu kontrol etme
CLUSTER INFO

// Cluster node'larını listeleme
CLUSTER NODES

// Belirli bir key'in hangi node'da olduğunu bulma
CLUSTER KEYSLOT key_name</pre>
                            </div>
                        </div>

                        <!-- Question 9 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis cache consistency nasıl sağlanır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Write-through / read-through / cache-aside</li>
                                    <li>TTL / Eviction policy ile stale data azaltılır</li>
                                </ul>
                                <p class="mt-2">Cache-aside pattern örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Veriyi cache'ten okuma
function getUser(userId) {
    const cacheKey = `user:${userId}`;
    let user = redis.get(cacheKey);
    
    if (!user) {
        // Cache miss, veritabanından oku
        user = db.query('SELECT * FROM users WHERE id = ?', [userId]);
        
        // Cache'e yaz
        redis.setex(cacheKey, 3600, JSON.stringify(user));
    } else {
        user = JSON.parse(user);
    }
    
    return user;
}

// Veriyi güncelleme
function updateUser(userId, userData) {
    // Veritabanını güncelle
    db.query('UPDATE users SET ? WHERE id = ?', [userData, userId]);
    
    // Cache'i güncelle veya sil
    const cacheKey = `user:${userId}`;
    redis.del(cacheKey);
}</pre>
                                <p class="mt-2">Write-through pattern örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Veriyi hem cache'e hem veritabanına yaz
function createUser(userData) {
    // Veritabanına yaz
    const userId = db.insert('users', userData);
    userData.id = userId;
    
    // Cache'e yaz
    const cacheKey = `user:${userId}`;
    redis.setex(cacheKey, 3600, JSON.stringify(userData));
    
    return userData;
}</pre>
                            </div>
                        </div>

                        <!-- Question 10 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Redis ile distributed lock nasıl yapılır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>SET key value NX PX <timeout></p>
                                <p>Redlock algorithm önerilir</p>
                                <p class="mt-2">Basit distributed lock örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Lock alma
function acquireLock(lockKey, requestId, ttlMs) {
    // NX: Sadece key mevcut değilse set et
    // PX: Milisaniye cinsinden TTL
    return redis.set(lockKey, requestId, 'NX', 'PX', ttlMs) === 'OK';
}

// Lock bırakma
function releaseLock(lockKey, requestId) {
    // Sadece sahibi lock'u bırakabilir
    const script = `
        if redis.call("GET", KEYS[1]) == ARGV[1] then
            return redis.call("DEL", KEYS[1])
        else
            return 0
        end
    `;
    
    return redis.eval(script, 1, lockKey, requestId);
}</pre>
                                <p class="mt-2">Redlock algoritması (daha güvenli):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Çoklu Redis instance'ı üzerinde lock
function acquireRedlock(lockKey, requestId, ttlMs, redisInstances) {
    const quorum = Math.floor(redisInstances.length / 2) + 1;
    let successCount = 0;
    const startTime = Date.now();
    
    for (const redis of redisInstances) {
        try {
            const result = redis.set(lockKey, requestId, 'NX', 'PX', ttlMs);
            if (result === 'OK') {
                successCount++;
            }
        } catch (e) {
            // Hata yönetimi
        }
        
        // TTL süresi geçtiyse dur
        if (Date.now() - startTime > ttlMs) {
            break;
        }
    }
    
    // Quorum'a ulaşıldı mı?
    if (successCount >= quorum) {
        // Lock alındı, kalan süre kadar lock'u koru
        const validityTime = ttlMs - (Date.now() - startTime);
        if (validityTime > 0) {
            return { success: true, validityTime };
        }
    }
    
    // Lock alınamadı, tüm instance'lardan temizle
    for (const redis of redisInstances) {
        try {
            redis.eval(releaseScript, 1, lockKey, requestId);
        } catch (e) {
            // Hata yönetimi
        }
    }
    
    return { success: false };
}</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ElasticSearch Category -->
            <div class="category-card bg-white rounded-xl shadow-md overflow-hidden" data-category="elasticsearch">
                <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 p-4">
                    <h3 class="text-xl font-bold text-white flex items-center">
                        <i class="fas fa-search mr-2"></i> ElasticSearch
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <!-- Question 1 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch nedir, kullanım alanları</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Full-text search engine, analytics. JSON document indexleme. Log analizi, search API, autocomplete.</p>
                                <p class="mt-2">ElasticSearch kullanım alanları:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Log analizi (ELK Stack)</li>
                                    <li>Full-text arama motorları</li>
                                    <li>Business analytics ve görselleştirme</li>
                                    <li>Uygulama performans monitoring</li>
                                    <li>E-ticaret ürün arama</li>
                                </ul>
                                <p class="mt-2">ElasticSearch başlatma komutu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# Docker ile ElasticSearch çalıştırma
docker run -d --name elasticsearch \
  -p 9200:9200 -p 9300:9300 \
  -e "discovery.type=single-node" \
  -e "xpack.security.enabled=false" \
  docker.elastic.co/elasticsearch/elasticsearch:8.14.3</pre>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Index, type, document nedir</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Index:</strong> Table karşılığı</p>
                                <p><strong>Type:</strong> Category (deprecated ES 7+)</p>
                                <p><strong>Document:</strong> JSON veri birimi</p>
                                <p class="mt-2">Index oluşturma örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /products
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 2
  },
  "mappings": {
    "properties": {
      "name": { "type": "text" },
      "description": { "type": "text" },
      "price": { "type": "float" },
      "category": { "type": "keyword" },
      "in_stock": { "type": "boolean" },
      "created_at": { "type": "date" }
    }
  }
}</pre>
                                <p class="mt-2">Document ekleme örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
POST /products/_doc/1
{
  "name": "Laptop",
  "description": "High performance laptop",
  "price": 1299.99,
  "category": "electronics",
  "in_stock": true,
  "created_at": "2023-06-30"
}</pre>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch bulk API neden kullanılır</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Çoklu insert/update → network ve performance optimize. Chunk'larla gönderilir.</p>
                                <p class="mt-2">Bulk API kullanım örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
POST /_bulk
{ "index" : { "_index" : "products", "_id" : "1" } }
{ "name" : "Laptop", "price" : 1299.99, "category" : "electronics" }
{ "index" : { "_index" : "products", "_id" : "2" } }
{ "name" : "Phone", "price" : 799.99, "category" : "electronics" }
{ "index" : { "_index" : "products", "_id" : "3" } }
{ "name" : "Book", "price" : 19.99, "category" : "books" }
{ "delete" : { "_index" : "products", "_id" : "4" } }</pre>
                                <p class="mt-2">Bulk API performans ipuçları:</p>
                                <ul class="list-disc pl-5 space-y-1 mt-2">
                                    <li>Her bulk isteği için 5-15MB boyutunda veri gönderin</li>
                                    <li>Çok büyük bulk istekleri cluster'ı yavaşlatabilir</li>
                                    <li>Paralel bulk işlemleri kullanarak performansı artırabilirsiniz</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch replikasyon ve shard</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Shard:</strong> Index partition</p>
                                <p><strong>Replica:</strong> Failover ve read scalability</p>
                                <p>Optimize index + search performansı</p>
                                <p class="mt-2">Shard ve replica yapılandırma örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /my_index
{
  "settings": {
    "number_of_shards": 5,    // Primary shard sayısı
    "number_of_replicas": 2   // Her primary shard için replica sayısı
  }
}</pre>
                                <p class="mt-2">Index shard bilgilerini görme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
GET /my_index/_settings
GET /_cat/shards/my_index?v</pre>
                                <p class="mt-2">Shard sayısını belirlerken dikkat edilmesi gerekenler:</p>
                                <ul class="list-disc pl-5 space-y-1 mt-2">
                                    <li>Shard sayısı index oluşturulduktan sonra değiştirilemez</li>
                                    <li>Her shard disk alanı ve memory kullanır</li>
                                    <li>Genel kural: GB başına 1 shard</li>
                                    <li>Çok fazla shard, cluster performansını olumsuz etkileyebilir</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch query DSL örneği</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Match query, bool query, range query. Full-text, term, phrase search.</p>
                                <p class="mt-2">Match query örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
GET /products/_search
{
  "query": {
    "match": {
      "name": "laptop computer"
    }
  }
}</pre>
                                <p class="mt-2">Bool query örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
GET /products/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "name": "laptop" } }
      ],
      "filter": [
        { "term": { "category": "electronics" } },
        { "range": { "price": { "gte": 1000 } } }
      ],
      "must_not": [
        { "term": { "in_stock": false } }
      ]
    }
  }
}</pre>
                                <p class="mt-2">Aggregation örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
GET /products/_search
{
  "size": 0,
  "aggs": {
    "categories": {
      "terms": { "field": "category" },
      "aggs": {
        "avg_price": { "avg": { "field": "price" } },
        "price_stats": { "stats": { "field": "price" } }
      }
    }
  }
}</pre>
                            </div>
                        </div>

                        <!-- Question 6 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch scaling ve HA</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Multi-node cluster</p>
                                <p>Master-eligible node + data node + ingest node</p>
                                <p>Cluster state monitoring</p>
                                <p class="mt-2">ElasticSearch cluster yapılandırma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# elasticsearch.yml (Node 1)
cluster.name: my-cluster
node.name: node-1
network.host: 0.0.0.0
discovery.seed_hosts: ["node-2", "node-3"]
cluster.initial_master_nodes: ["node-1", "node-2", "node-3"]
node.roles: [master, data, ingest]

# elasticsearch.yml (Node 2)
cluster.name: my-cluster
node.name: node-2
network.host: 0.0.0.0
discovery.seed_hosts: ["node-1", "node-3"]
cluster.initial_master_nodes: ["node-1", "node-2", "node-3"]
node.roles: [master, data]

# elasticsearch.yml (Node 3)
cluster.name: my-cluster
node.name: node-3
network.host: 0.0.0.0
discovery.seed_hosts: ["node-1", "node-2"]
cluster.initial_master_nodes: ["node-1", "node-2", "node-3"]
node.roles: [data]</pre>
                                <p class="mt-2">Cluster health kontrolü:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
GET /_cluster/health
GET /_cluster/health?pretty
GET /_cat/nodes?v
GET /_cat/health?v</pre>
                            </div>
                        </div>

                        <!-- Question 7 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch snapshot nasıl alınır</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Repository (S3, FS, HDFS) ile snapshot</p>
                                <p>Disaster recovery ve backup</p>
                                <p class="mt-2">Snapshot repository oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /_snapshot/my_backup
{
  "type": "fs",
  "settings": {
    "location": "/mount/backups/my_backup"
  }
}</pre>
                                <p class="mt-2">S3 repository oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /_snapshot/my_s3_backup
{
  "type": "s3",
  "settings": {
    "bucket": "my-backup-bucket",
    "region": "us-west-1",
    "access_key": "your-access-key",
    "secret_key": "your-secret-key"
  }
}</pre>
                                <p class="mt-2">Snapshot oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /_snapshot/my_backup/snapshot_1?wait_for_completion=true
{
  "indices": "products,users",
  "ignore_unavailable": true,
  "include_global_state": false
}</pre>
                                <p class="mt-2">Snapshot'tan geri yükleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
POST /_snapshot/my_backup/snapshot_1/_restore
{
  "indices": "products",
  "ignore_unavailable": true,
  "include_global_state": false,
  "rename_pattern": "products",
  "rename_replacement": "restored_products"
}</pre>
                            </div>
                        </div>

                        <!-- Question 8 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot ile reactive ElasticSearch integration</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>WebClient veya reactive-rest-client</p>
                                <p>Flux<Document> stream üzerinden query</p>
                                <p>Non-blocking search API</p>
                                <p class="mt-2">Spring Boot projeye ElasticSearch Reactive dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle veya pom.xml
implementation 'org.springframework.boot:spring-boot-starter-data-elasticsearch'
implementation 'org.springframework.boot:spring-boot-starter-webflux'</pre>
                                <p class="mt-2">ElasticSearch konfigürasyonu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class ReactiveElasticsearchConfig extends AbstractReactiveElasticsearchConfiguration {
    
    @Override
    @Bean
    public ReactiveElasticsearchClient reactiveElasticsearchClient() {
        final ClientConfiguration clientConfiguration = ClientConfiguration.builder()
                .connectedTo("localhost:9200")
                .build();
        
        return ReactiveRestClients.create(clientConfiguration);
    }
}</pre>
                                <p class="mt-2">Reactive Repository:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
public interface ProductRepository extends ReactiveElasticsearchRepository<Product, String> {
    
    Flux<Product> findByName(String name);
    
    Flux<Product> findByCategory(String category);
    
    Flux<Product> findByPriceBetween(double min, double max);
}</pre>
                                <p class="mt-2">Reactive Service kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
public class ProductService {
    
    @Autowired
    private ProductRepository productRepository;
    
    public Flux<Product> searchProducts(String query) {
        NativeSearchQuery searchQuery = new NativeSearchQueryBuilder()
                .withQuery(QueryBuilders.matchQuery("name", query))
                .build();
        
        return productRepository.search(searchQuery);
    }
    
    public Mono<Product> saveProduct(Product product) {
        return productRepository.save(product);
    }
    
    public Flux<Product> findAllProducts() {
        return productRepository.findAll();
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 9 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch index lifecycle management (ILM)</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Index'lerin yaşlanma politikaları ile otomatik silinmesini, taşınmasını sağlar.</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>Hot:</strong> Aktif veri, sık indexleme ve sorgulama</li>
                                    <li><strong>Warm:</strong> Sık erişilmeyen veri, daha az kaynak</li>
                                    <li><strong>Cold:</strong> Nadiren erişilen veri, arşiv</li>
                                    <li><strong>Delete:</strong> Belirli süre sonra silme</li>
                                </ul>
                                <p class="mt-2">ILM Policy oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /_ilm/policy/logs_policy
{
  "policy": {
    "phases": {
      "hot": {
        "min_age": "0ms",
        "actions": {
          "rollover": {
            "max_size": "50GB",
            "max_age": "30d"
          }
        }
      },
      "warm": {
        "min_age": "30d",
        "actions": {
          "shrink": {
            "number_of_shards": 1
          },
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "cold": {
        "min_age": "60d",
        "actions": {
          "freeze": {}
        }
      },
      "delete": {
        "min_age": "90d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}</pre>
                                <p class="mt-2">Index template'e ILM policy uygulama:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /_index_template/logs_template
{
  "index_patterns": ["logs-*"],
  "template": {
    "settings": {
      "number_of_shards": 2,
      "number_of_replicas": 1,
      "lifecycle.name": "logs_policy",
      "lifecycle.rollover_alias": "logs"
    }
  }
}</pre>
                            </div>
                        </div>

                        <!-- Question 10 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">ElasticSearch analyzer ve tokenization</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Analyzer, metni tokenize eder. Standart analyzer, keyword analyzer, custom analyzer.</p>
                                <p class="mt-2">Analyzer test etme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
POST /_analyze
{
  "analyzer": "standard",
  "text": "The quick brown fox jumps over the lazy dog"
}</pre>
                                <p class="mt-2">Custom analyzer oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_custom_analyzer": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "my_stemmer"
          ]
        }
      },
      "filter": {
        "my_stemmer": {
          "type": "stemmer",
          "name": "english"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "content": {
        "type": "text",
        "analyzer": "my_custom_analyzer"
      }
    }
  }
}</pre>
                                <p class="mt-2">Farklı analyzer türleri:</p>
                                <ul class="list-disc pl-5 space-y-1 mt-2">
                                    <li><strong>Standard Analyzer:</strong> Varsayılan, lowercase ve punctuation filtreleme</li>
                                    <li><strong>Simple Analyzer:</strong> Sadece non-letter karakterleri ayırır</li>
                                    <li><strong>Whitespace Analyzer:</strong> Sadece boşluklara göre böler</li>
                                    <li><strong>Keyword Analyzer:</strong> Metni hiç bölmeyecek şekilde token'lar</li>
                                    <li><strong>Language Analyzers:</strong> Belirli dillere özel stemming (english, turkish vb.)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Spring Boot & Core Category -->
            <div class="category-card bg-white rounded-xl shadow-md overflow-hidden" data-category="spring">
                <div class="bg-gradient-to-r from-green-500 to-green-600 p-4">
                    <h3 class="text-xl font-bold text-white flex items-center">
                        <i class="fab fa-spring mr-2"></i> Spring Boot & Core
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <!-- Question 1 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot starter'ları ne işe yarar?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Uygulamayı hızlı başlatmak için bağımlılıkları gruplar. Örn: spring-boot-starter-web → Spring MVC + Tomcat + JSON support</p>
                                <p class="mt-2">Popüler Spring Boot starter'lar:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>spring-boot-starter-web:</strong> Web uygulamaları için (Spring MVC, Tomcat)</li>
                                    <li><strong>spring-boot-starter-data-jpa:</strong> JPA ve veritabanı erişimi için</li>
                                    <li><strong>spring-boot-starter-security:</strong> Spring Security için</li>
                                    <li><strong>spring-boot-starter-test:</strong> Test için (JUnit, Mockito)</li>
                                    <li><strong>spring-boot-starter-actuator:</strong> Monitoring için</li>
                                </ul>
                                <p class="mt-2">build.gradle örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    runtimeOnly 'com.h2database:h2'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}</pre>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot auto-configuration nasıl çalışır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>@EnableAutoConfiguration + classpath scanning</p>
                                <p>Beans, classpath ve properties'e göre otomatik konfig</p>
                                <p class="mt-2">Auto-configuration mekanizması:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Classpath'teki JAR'ları kontrol eder</li>
                                    <li>Koşullu bean oluşturma (@ConditionalOnClass, @ConditionalOnMissingBean vb.)</li>
                                    <li>application.properties veya application.yml ile özelleştirme</li>
                                </ul>
                                <p class="mt-2">Örnek auto-configuration sınıfı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
@ConditionalOnClass(DataSource.class)
@ConditionalOnProperty(name = "spring.datasource.url", matchIfMissing = false)
@EnableConfigurationProperties(DataSourceProperties.class)
public class DataSourceAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public DataSource dataSource(DataSourceProperties properties) {
        return properties.initializeDataSourceBuilder().build();
    }
}</pre>
                                <p class="mt-2">Auto-configuration raporu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// application.properties ile auto-configuration raporunu aktifleştirme
debug=true

// Uygulama başlarken hangi auto-configuration'ların uygulandığını gösterir
// veya /actuator/conditions endpoint'ini kullanabilirsiniz</pre>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">@SpringBootApplication neyi kapsar?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>@Configuration + @EnableAutoConfiguration + @ComponentScan</p>
                                <p class="mt-2">@SpringBootApplication açılımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@SpringBootApplication
// Aşağıdaki üç anotasyonun birleşimidir:
// @Configuration: Bu sınıfın konfigürasyon sınıfı olduğunu belirtir
// @EnableAutoConfiguration: Spring Boot auto-configuration'ı aktifleştirir
// @ComponentScan: Component'leri tarar (@Component, @Service, @Repository vb.)

// Açık haliyle:
@Configuration
@EnableAutoConfiguration
@ComponentScan
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot Actuator nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Application health, metrics, info endpoint'leri. Custom endpoint oluşturulabilir.</p>
                                <p class="mt-2">Actuator dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.boot:spring-boot-starter-actuator'</pre>
                                <p class="mt-2">Yaygın Actuator endpoint'leri:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>/actuator/health:</strong> Uygulama sağlık durumu</li>
                                    <li><strong>/actuator/info:</strong> Uygulama bilgileri</li>
                                    <li><strong>/actuator/metrics:</strong> Metrikler (memory, cpu, http istatistikleri)</li>
                                    <li><strong>/actuator/env:</strong> Ortam değişkenleri ve konfigürasyon</li>
                                    <li><strong>/actuator/beans:</strong> Uygulamadaki tüm bean'ler</li>
                                    <li><strong>/actuator/mappings:</strong> Request mapping'ler</li>
                                </ul>
                                <p class="mt-2">Actuator konfigürasyonu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// application.properties
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

// Tüm endpoint'leri açmak için
management.endpoints.web.exposure.include=*</pre>
                                <p class="mt-2">Custom health indicator oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Component
public class CustomHealthIndicator implements HealthIndicator {
    
    @Override
    public Health health() {
        // Sağlık kontrolü yap
        boolean isHealthy = checkExternalService();
        
        if (isHealthy) {
            return Health.up()
                .withDetail("service", "External Service")
                .withDetail("status", "Available")
                .build();
        } else {
            return Health.down()
                .withDetail("service", "External Service")
                .withDetail("status", "Unavailable")
                .build();
        }
    }
    
    private boolean checkExternalService() {
        // Dış servis kontrolü
        return true;
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot vs Spring MVC</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Boot:</strong> Production-ready default config + embedded server</p>
                                <p><strong>MVC:</strong> Manual konfig ve dependency management</p>
                                <p class="mt-2">Spring MVC projesi örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// web.xml
<web-app>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-context.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring-mvc.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app>

// spring-context.xml
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd">
    
    <context:component-scan base-package="com.example"/>
    <context:annotation-config/>
</beans>

// spring-mvc.xml
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc.xsd">
    
    <mvc:annotation-driven/>
    <mvc:default-servlet-handler/>
    
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean>
</beans></pre>
                                <p class="mt-2">Spring Boot projesi örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@SpringBootApplication
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}

@RestController
public class MyController {
    
    @GetMapping("/")
    public String home() {
        return "Hello, Spring Boot!";
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 6 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot properties vs YAML</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Properties:</strong> Key=value</p>
                                <p><strong>YAML:</strong> Nested config için daha okunabilir</p>
                                <p class="mt-2">Properties dosyası örneği (application.properties):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# Server configuration
server.port=8080
server.servlet.context-path=/api

# Database configuration
spring.datasource.url=jdbc:mysql://localhost:3306/mydb
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Logging configuration
logging.level.org.springframework=INFO
logging.level.com.example=DEBUG</pre>
                                <p class="mt-2">YAML dosyası örneği (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# Server configuration
server:
  port: 8080
  servlet:
    context-path: /api

# Database configuration
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mydb
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  # JPA configuration
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true

# Logging configuration
logging:
  level:
    org.springframework: INFO
    com.example: DEBUG</pre>
                                <p class="mt-2">YAML avantajları:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Hiyerarşik yapı sayesinde daha okunabilir</li>
                                    <li>Karmaşık konfigürasyonları daha düzenli gösterir</li>
                                    <li>Listeleri ve map'leri daha kolay tanımlar</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Question 7 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Profiles ve @Profile anotasyonu</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Farklı environment (dev, test, prod) konfig yönetimi</p>
                                <p>Bean'ler aktif/inaktif olarak yüklenebilir</p>
                                <p class="mt-2">Profile bazlı konfigürasyon:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# application-dev.properties
server.port=8080
spring.datasource.url=jdbc:mysql://localhost:3306/devdb

# application-prod.properties
server.port=80
spring.datasource.url=jdbc:mysql://prod-db:3306/proddb</pre>
                                <p class="mt-2">@Profile anotasyonu kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class DatabaseConfig {
    
    @Bean
    @Profile("dev")
    public DataSource devDataSource() {
        return DataSourceBuilder.create()
                .url("jdbc:mysql://localhost:3306/devdb")
                .username("devuser")
                .password("devpass")
                .build();
    }
    
    @Bean
    @Profile("prod")
    public DataSource prodDataSource() {
        return DataSourceBuilder.create()
                .url("jdbc:mysql://prod-db:3306/proddb")
                .username("produser")
                .password("prodpass")
                .build();
    }
    
    @Bean
    @Profile("!prod")
    public DataSource defaultDataSource() {
        return DataSourceBuilder.create()
                .url("jdbc:mysql://localhost:3306/defaultdb")
                .username("defaultuser")
                .password("defaultpass")
                .build();
    }
}</pre>
                                <p class="mt-2">Profile'leri aktifleştirme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// application.properties
spring.profiles.active=dev

// Komut satırından
java -jar myapp.jar --spring.profiles.active=prod

// Ortam değişkeni ile
export SPRING_PROFILES_ACTIVE=prod</pre>
                            </div>
                        </div>

                        <!-- Question 8 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot devtools ne işe yarar?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Hot reload, live reload, remote debug support</p>
                                <p class="mt-2">Devtools dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
developmentOnly 'org.springframework.boot:spring-boot-devtools'</pre>
                                <p class="mt-2">Devtools özellikleri:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><strong>Automatic Restart:</strong> Classpath'teki değişiklikleri algılar ve uygulamayı yeniden başlatır</li>
                                    <li><strong>Live Reload:</strong> Tarayıcıyı otomatik yeniler</li>
                                    <li><strong>Remote Debug:</strong> Uzak uygulamada debug yapma imkanı</li>
                                    <li><strong>Development Settings:</strong> Geliştirme için uygun ayarlar (caching devre dışı, logging seviyesi ayarı vb.)</li>
                                </ul>
                                <p class="mt-2">Devtools konfigürasyonu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// application.properties
# Restart özelliğini devre dışı bırakma
spring.devtools.restart.enabled=false

# Belirli kaynakları restart tetiklememesi için
spring.devtools.restart.exclude=static/**,public/**

# Live reload özelliğini devre dışı bırakma
spring.devtools.livereload.enabled=false</pre>
                            </div>
                        </div>

                        <!-- Question 9 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Boot Logging framework</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Default → Logback</p>
                                <p>Log level override → application.properties</p>
                                <p class="mt-2">Logging konfigürasyonu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# application.properties
# Root logger seviyesi
logging.level.root=INFO

# Paket bazlı logger seviyesi
logging.level.org.springframework=INFO
logging.level.org.hibernate=ERROR
logging.level.com.example=DEBUG

# Log dosyası konfigürasyonu
logging.file.name=logs/myapp.log
logging.file.max-size=10MB
logging.file.max-history=7

# Log formatı
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pre>
                                <p class="mt-2">Logback konfigürasyon dosyası (logback-spring.xml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <property name="LOGS_PATH" value="./logs" />
    
    <appender name="Console" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    
    <appender name="RollingFile" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOGS_PATH}/myapp.log</file>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
        
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOGS_PATH}/myapp-%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>7</maxHistory>
        </rollingPolicy>
    </appender>
    
    <!-- Spring profil bazlı log seviyesi -->
    <springProfile name="dev">
        <logger name="com.example" level="DEBUG" additivity="false">
            <appender-ref ref="Console" />
        </logger>
    </springProfile>
    
    <springProfile name="prod">
        <logger name="com.example" level="INFO" additivity="false">
            <appender-ref ref="RollingFile" />
        </logger>
    </springProfile>
    
    <root level="INFO">
        <appender-ref ref="Console" />
        <appender-ref ref="RollingFile" />
    </root>
</configuration></pre>
                            </div>
                        </div>

                        <!-- Question 10 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Custom starter oluşturmak</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Başka projelerde tekrar kullanılabilir dependency set'i</p>
                                <p class="mt-2">Custom starter oluşturma adımları:</p>
                                <ol class="list-decimal pl-5 space-y-1">
                                    <li>Yeni bir Spring Boot projesi oluştur</li>
                                    <li>Gerekli dependency'leri ekle</li>
                                    <li>Auto-configuration sınıfı oluştur</li>
                                    <li>META-INF/spring.factories dosyası oluştur</li>
                                    <li>Projeyi build et ve yayınla</li>
                                </ol>
                                <p class="mt-2">Örnek custom starter projesi:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.1.0'
    id 'io.spring.dependency-management' version '1.1.0'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT'

java {
    sourceCompatibility = '17'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter'
    implementation 'org.springframework.boot:spring-boot-autoconfigure'
    annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'
}

tasks.named('test') {
    useJUnitPlatform()
}</pre>
                                <p class="mt-2">Auto-configuration sınıfı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
package com.example.starter;

import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@ConditionalOnClass(MyService.class)
@EnableConfigurationProperties(MyServiceProperties.class)
public class MyServiceAutoConfiguration {
    
    private final MyServiceProperties properties;
    
    public MyServiceAutoConfiguration(MyServiceProperties properties) {
        this.properties = properties;
    }
    
    @Bean
    @ConditionalOnMissingBean
    public MyService myService() {
        return new MyService(properties.getMessage());
    }
}</pre>
                                <p class="mt-2">Properties sınıfı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
package com.example.starter;

import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties(prefix = "my.service")
public class MyServiceProperties {
    
    private String message = "Default message";
    
    public String getMessage() {
        return message;
    }
    
    public void setMessage(String message) {
        this.message = message;
    }
}</pre>
                                <p class="mt-2">Service sınıfı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
package com.example.starter;

public class MyService {
    
    private final String message;
    
    public MyService(String message) {
        this.message = message;
    }
    
    public String getMessage() {
        return message;
    }
}</pre>
                                <p class="mt-2">spring.factories dosyası:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
# src/main/resources/META-INF/spring.factories
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.starter.MyServiceAutoConfiguration</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Spring Cloud & Microservices Category -->
            <div class="category-card bg-white rounded-xl shadow-md overflow-hidden" data-category="springcloud">
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 p-4">
                    <h3 class="text-xl font-bold text-white flex items-center">
                        <i class="fas fa-cloud mr-2"></i> Spring Cloud & Microservices
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <!-- Question 1 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Cloud Config Server nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Microservices için merkezi konfig yönetimi. Config Git repo üzerinden servisler tarafından alınabilir. @RefreshScope ile runtime config update mümkün.</p>
                                <p class="mt-2">Config Server dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-config-server'
implementation 'org.springframework.cloud:spring-cloud-starter-config'</pre>
                                <p class="mt-2">Config Server sınıfı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@SpringBootApplication
@EnableConfigServer
public class ConfigServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(ConfigServerApplication.class, args);
    }
}</pre>
                                <p class="mt-2">Config Server konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
server:
  port: 8888

spring:
  cloud:
    config:
      server:
        git:
          uri: https://github.com/yourusername/config-repo
          clone-on-start: true
          search-paths: '{application}'</pre>
                                <p class="mt-2">Client tarafında konfigürasyon (bootstrap.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
spring:
  application:
    name: user-service
  cloud:
    config:
      uri: http://localhost:8888
      fail-fast: true
      retry:
        max-attempts: 10
        max-interval: 2000</pre>
                                <p class="mt-2">@RefreshScope ile runtime config güncelleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@RestController
@RefreshScope
public class GreetingController {
    
    @Value("${greeting.message:Hello}")
    private String message;
    
    @GetMapping("/greeting")
    public String getGreeting() {
        return message;
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Cloud Eureka nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Service discovery / registry. Client → kendini register eder, diğer servisleri bulur.</p>
                                <p class="mt-2">Eureka Server dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-netflix-eureka-server'</pre>
                                <p class="mt-2">Eureka Server sınıfı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@SpringBootApplication
@EnableEurekaServer
public class EurekaServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaServerApplication.class, args);
    }
}</pre>
                                <p class="mt-2">Eureka Server konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
server:
  port: 8761

eureka:
  client:
    register-with-eureka: false
    fetch-registry: false</pre>
                                <p class="mt-2">Eureka Client dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-netflix-eureka-client'</pre>
                                <p class="mt-2">Eureka Client konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
spring:
  application:
    name: user-service

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka
  instance:
    prefer-ip-address: true</pre>
                                <p class="mt-2">Service discovery kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@RestController
public class UserController {
    
    @Autowired
    private DiscoveryClient discoveryClient;
    
    @Autowired
    private RestTemplate restTemplate;
    
    @GetMapping("/users/{id}/orders")
    public List<Order> getUserOrders(@PathVariable Long id) {
        // Service discovery ile order-service URL'ini bul
        List<ServiceInstance> instances = discoveryClient.getInstances("order-service");
        
        if (instances.isEmpty()) {
            throw new RuntimeException("Order service not available");
        }
        
        String orderServiceUrl = instances.get(0).getUri().toString();
        
        // RestTemplate ile çağrı yap
        ResponseEntity<Order[]> response = restTemplate.getForEntity(
            orderServiceUrl + "/orders/user/" + id, 
            Order[].class
        );
        
        return Arrays.asList(response.getBody());
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Cloud Gateway vs Zuul</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Zuul:</strong> Blocking, servlet based</p>
                                <p><strong>Gateway:</strong> Reactive, non-blocking, filtre + route destekli</p>
                                <p class="mt-2">Spring Cloud Gateway dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-gateway'</pre>
                                <p class="mt-2">Gateway konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
server:
  port: 8080

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      routes:
        - id: user-service
          uri: lb://user-service
          predicates:
            - Path=/api/users/**
          filters:
            - StripPrefix=1
            - name: RateLimit
              args:
                key-resolver: "#{@userKeyResolver}"
                replenishRate: 10
                burstCapacity: 20
                
        - id: order-service
          uri: lb://order-service
          predicates:
            - Path=/api/orders/**
          filters:
            - StripPrefix=1
            - AddRequestHeader=X-Request-Source, gateway</pre>
                                <p class="mt-2">Rate limiting için KeyResolver:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class RateLimitConfig {
    
    @Bean
    public KeyResolver userKeyResolver() {
        return exchange -> {
            // IP adresine göre rate limiting
            String ip = exchange.getRequest().getRemoteAddress().getAddress().getHostAddress();
            return Mono.just(ip);
        };
    }
}</pre>
                                <p class="mt-2">Custom filter oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Component
public class AuthenticationFilter implements GlobalFilter, Ordered {
    
    @Override
    public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {
        ServerHttpRequest request = exchange.getRequest();
        
        // JWT token kontrolü
        String authHeader = request.getHeaders().getFirst("Authorization");
        if (authHeader == null || !authHeader.startsWith("Bearer ")) {
            exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);
            return exchange.getResponse().setComplete();
        }
        
        String token = authHeader.substring(7);
        
        // Token doğrulama
        if (!validateToken(token)) {
            exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);
            return exchange.getResponse().setComplete();
        }
        
        // Header'a kullanıcı bilgisi ekle
        exchange.getRequest().mutate()
            .header("X-User-Id", getUserIdFromToken(token))
            .build();
        
        return chain.filter(exchange);
    }
    
    @Override
    public int getOrder() {
        return -1; // En yüksek öncelik
    }
    
    private boolean validateToken(String token) {
        // Token doğrulama mantığı
        return true;
    }
    
    private String getUserIdFromToken(String token) {
        // Token'dan kullanıcı ID'sini çıkar
        return "123";
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Circuit Breaker ne işe yarar?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Hatalı servis çağrılarını keser. Retry ve fallback mekanizması sağlar. Resilience4j ile uygulanır.</p>
                                <p class="mt-2">Resilience4j dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-circuitbreaker-resilience4j'</pre>
                                <p class="mt-2">Circuit Breaker konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
resilience4j:
  circuitbreaker:
    configs:
      default:
        failureRateThreshold: 50
        waitDurationInOpenState: 5s
        slidingWindowSize: 10
        permittedNumberOfCallsInHalfOpenState: 3
        automaticTransitionFromOpenToHalfOpenEnabled: true
    instances:
      orderService:
        baseConfig: default
        
  retry:
    configs:
      default:
        maxAttempts: 3
        waitDuration: 1s
        enableExponentialBackoff: true
        exponentialBackoffMultiplier: 2
        retryExceptions:
          - org.springframework.web.client.HttpServerErrorException
          - java.io.IOException
    instances:
      orderService:
        baseConfig: default</pre>
                                <p class="mt-2">Circuit Breaker kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
public class OrderServiceClient {
    
    @Autowired
    private RestTemplate restTemplate;
    
    @Autowired
    private CircuitBreakerFactory circuitBreakerFactory;
    
    @Autowired
    private RetryFactory retryFactory;
    
    public Order getOrderById(Long id) {
        // Circuit Breaker kullanarak servis çağrısı
        CircuitBreaker circuitBreaker = circuitBreakerFactory.create("orderService");
        
        Retry retry = retryFactory.create("orderService");
        
        Supplier<Order> orderSupplier = Retry.decorateSupplier(retry, 
            () -> circuitBreaker.run(
                () -> restTemplate.getForObject(
                    "http://order-service/api/orders/" + id, 
                    Order.class
                ),
                throwable -> fallbackOrder(id)
            )
        );
        
        return orderSupplier.get();
    }
    
    private Order fallbackOrder(Long id) {
        // Fallback mantığı
        Order fallbackOrder = new Order();
        fallbackOrder.setId(id);
        fallbackOrder.setDescription("Fallback order - service unavailable");
        return fallbackOrder;
    }
}</pre>
                                <p class="mt-2">@CircuitBreaker anotasyonu ile kullanım:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
public class OrderServiceClient {
    
    @Autowired
    private RestTemplate restTemplate;
    
    @CircuitBreaker(name = "orderService", fallbackMethod = "fallbackOrder")
    public Order getOrderById(Long id) {
        return restTemplate.getForObject(
            "http://order-service/api/orders/" + id, 
            Order.class
        );
    }
    
    public Order fallbackOrder(Long id, Exception e) {
        // Fallback mantığı
        Order fallbackOrder = new Order();
        fallbackOrder.setId(id);
        fallbackOrder.setDescription("Fallback order - " + e.getMessage());
        return fallbackOrder;
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">API rate limiting nasıl yapılır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Token bucket / Leaky bucket. Redis kullanılarak dağıtık rate limiting.</p>
                                <p class="mt-2">Spring Cloud Gateway ile rate limiting:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// application.yml
spring:
  cloud:
    gateway:
      routes:
        - id: user-service
          uri: lb://user-service
          predicates:
            - Path=/api/users/**
          filters:
            - name: RequestRateLimiter
              args:
                key-resolver: "#{@userKeyResolver}"
                replenishRate: 10
                burstCapacity: 20</pre>
                                <p class="mt-2">KeyResolver bean'i:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class RateLimitConfig {
    
    @Bean
    public KeyResolver userKeyResolver() {
        // IP adresine göre rate limiting
        return exchange -> {
            String ip = exchange.getRequest().getRemoteAddress().getAddress().getHostAddress();
            return Mono.just(ip);
        };
    }
    
    @Bean
    public KeyResolver apiKeyResolver() {
        // API key'e göre rate limiting
        return exchange -> {
            String apiKey = exchange.getRequest().getHeaders().getFirst("X-API-Key");
            if (apiKey == null) {
                return Mono.just("anonymous");
            }
            return Mono.just(apiKey);
        };
    }
    
    @Bean
    public KeyResolver userPrincipalResolver() {
        // Kullanıcı adına göre rate limiting
        return exchange -> exchange.getPrincipal()
            .map(Principal::getName)
            .defaultIfEmpty("anonymous");
    }
}</pre>
                                <p class="mt-2">Redis ile dağıtık rate limiting:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Component
public class RedisRateLimiter {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    public boolean allowRequest(String key, int limit, int periodInSeconds) {
        String redisKey = "rate_limit:" + key;
        
        // Mevcut değeri al veya 0 olarak ayarla
        Long current = redisTemplate.opsForValue().increment(redisKey);
        
        if (current != null && current == 1) {
            // İstek için TTL ayarla
            redisTemplate.expire(redisKey, periodInSeconds, TimeUnit.SECONDS);
        }
        
        // Limiti kontrol et
        return current != null && current <= limit;
    }
}</pre>
                                <p class="mt-2">Rate limiting filter:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Component
public class RateLimitFilter implements Filter {
    
    @Autowired
    private RedisRateLimiter rateLimiter;
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
            throws IOException, ServletException {
        
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        
        String clientIp = httpRequest.getRemoteAddr();
        
        // Rate limiting kontrolü
        if (!rateLimiter.allowRequest(clientIp, 100, 60)) {
            httpResponse.setStatus(HttpStatus.TOO_MANY_REQUESTS.value());
            httpResponse.getWriter().write("Rate limit exceeded");
            return;
        }
        
        chain.doFilter(request, response);
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 6 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Distributed tracing nasıl yapılır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Spring Cloud Sleuth + Zipkin/Jaeger. TraceId + SpanId ile servis çağrı akışı izlenir.</p>
                                <p class="mt-2">Sleuth ve Zipkin dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-sleuth'
implementation 'org.springframework.cloud:spring-cloud-sleuth-zipkin'</pre>
                                <p class="mt-2">Zipkin konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
spring:
  sleuth:
    sampler:
      probability: 1.0  # %100 traceleme
  zipkin:
    base-url: http://localhost:9411</pre>
                                <p class="mt-2">Custom span oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
public class OrderService {
    
    @Autowired
    private Tracer tracer;
    
    public Order processOrder(Order order) {
        // Yeni span oluştur
        Span newSpan = tracer.nextSpan().name("processOrder");
        
        try (Tracer.SpanInScope ws = tracer.withSpan(newSpan.start())) {
            // İşlemi yap
            newSpan.tag("orderId", order.getId().toString());
            newSpan.event("orderProcessingStarted");
            
            // İşlem mantığı
            Order processedOrder = doProcessOrder(order);
            
            newSpan.event("orderProcessingCompleted");
            return processedOrder;
        } finally {
            newSpan.end();
        }
    }
    
    private Order doProcessOrder(Order order) {
        // İşlem mantığı
        return order;
    }
}</pre>
                                <p class="mt-2">RestTemplate ile tracing:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class RestTemplateConfig {
    
    @Bean
    public RestTemplate restTemplate(Tracer tracer) {
        RestTemplate restTemplate = new RestTemplate();
        
        // Tracing interceptor ekle
        restTemplate.setInterceptors(Collections.singletonList(
            new TracingClientHttpRequestInterceptor(tracer)
        ));
        
        return restTemplate;
    }
}</pre>
                                <p class="mt-2">WebClient ile tracing:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class WebClientConfig {
    
    @Bean
    public WebClient webClient(Tracer tracer) {
        return WebClient.builder()
            .filter((request, next) -> {
                // Yeni span oluştur
                Span span = tracer.nextSpan().name(request.url().toString());
                
                try (Tracer.SpanInScope ws = tracer.withSpan(span.start())) {
                    // Header'a tracing bilgilerini ekle
                    ClientRequest newRequest = ClientRequest.from(request)
                        .header("X-B3-TraceId", span.context().traceId())
                        .header("X-B3-SpanId", span.context().spanId())
                        .header("X-B3-Sampled", "1")
                        .build();
                    
                    return next.exchange(newRequest);
                } finally {
                    span.end();
                }
            })
            .build();
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 7 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Cloud Bus ne işe yarar?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Config değişikliklerini servisler arasında broadcast eder. RabbitMQ veya Kafka üzerinden event-driven update.</p>
                                <p class="mt-2">Spring Cloud Bus dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-bus-amqp'
// veya Kafka için
implementation 'org.springframework.cloud:spring-cloud-starter-bus-kafka'</pre>
                                <p class="mt-2">RabbitMQ konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
spring:
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    
  cloud:
    bus:
      enabled: true
      refresh:
        enabled: true
      env:
        enabled: true</pre>
                                <p class="mt-2">Config Server'da Spring Cloud Bus konfigürasyonu:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
server:
  port: 8888

spring:
  application:
    name: config-server
  cloud:
    config:
      server:
        git:
          uri: https://github.com/yourusername/config-repo
    bus:
      enabled: true

management:
  endpoints:
    web:
      exposure:
        include: bus-refresh</pre>
                                <p class="mt-2">Config güncellemeyi tüm servislere yayma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// Config Server'dan tüm servisleri güncellemek için
POST /actuator/bus-refresh

// Belirli bir servisi güncellemek için
POST /actuator/bus-refresh?destination=user-service:**

// Belirli bir instance'ı güncellemek için
POST /actuator/bus-refresh?destination=user-service:8080</pre>
                                <p class="mt-2">Client tarafında @RefreshScope kullanımı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@RestController
@RefreshScope
public class GreetingController {
    
    @Value("${greeting.message:Hello}")
    private String message;
    
    @GetMapping("/greeting")
    public String getGreeting() {
        return message;
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 8 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Service-to-Service communication nasıl sağlanır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>REST (synchronous)</p>
                                <p>gRPC (binary, high performance)</p>
                                <p>Kafka / RabbitMQ (async, event-driven)</p>
                                <p class="mt-2">RestTemplate ile servis çağrısı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class RestTemplateConfig {
    
    @Bean
    @LoadBalanced
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}

@Service
public class UserServiceClient {
    
    @Autowired
    private RestTemplate restTemplate;
    
    public User getUserById(Long id) {
        // Service name ile çağrı yap
        return restTemplate.getForObject(
            "http://user-service/api/users/" + id, 
            User.class
        );
    }
}</pre>
                                <p class="mt-2">WebClient ile servis çağrısı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Configuration
public class WebClientConfig {
    
    @Bean
    @LoadBalanced
    public WebClient.Builder webClientBuilder() {
        return WebClient.builder();
    }
}

@Service
public class UserServiceClient {
    
    @Autowired
    private WebClient.Builder webClientBuilder;
    
    public Mono<User> getUserById(Long id) {
        return webClientBuilder.build()
            .get()
            .uri("http://user-service/api/users/" + id)
            .retrieve()
            .bodyToMono(User.class);
    }
}</pre>
                                <p class="mt-2">Feign Client ile servis çağrısı:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-openfeign'

@SpringBootApplication
@EnableFeignClients
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}

@FeignClient(name = "user-service")
public interface UserClient {
    
    @GetMapping("/api/users/{id}")
    User getUserById(@PathVariable Long id);
    
    @PostMapping("/api/users")
    User createUser(@RequestBody User user);
}

@Service
public class OrderService {
    
    @Autowired
    private UserClient userClient;
    
    public Order createOrder(Order order) {
        // User service'ten kullanıcı bilgilerini al
        User user = userClient.getUserById(order.getUserId());
        
        // Siparişi oluştur
        order.setUserDetails(user);
        return saveOrder(order);
    }
}</pre>
                                <p class="mt-2">Kafka ile event-driven iletişim:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.kafka:spring-kafka'

@Service
public class OrderEventProducer {
    
    @Autowired
    private KafkaTemplate<String, Object> kafkaTemplate;
    
    public void sendOrderCreatedEvent(Order order) {
        OrderCreatedEvent event = new OrderCreatedEvent(
            order.getId(), 
            order.getUserId(), 
            order.getTotalAmount()
        );
        
        kafkaTemplate.send("order-events", event);
    }
}

@Service
public class OrderEventConsumer {
    
    @KafkaListener(topics = "order-events", groupId = "notification-service")
    public void handleOrderCreatedEvent(OrderCreatedEvent event) {
        // Sipariş oluşturma event'ini işle
        // Örneğin bildirim gönder
        sendNotification(event.getUserId(), "Siparişiniz oluşturuldu");
    }
    
    private void sendNotification(Long userId, String message) {
        // Bildirim gönderme mantığı
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 9 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Spring Cloud Stream nedir?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p>Event-driven microservices için abstraction sağlar. Kafka veya RabbitMQ ile bind edilir. Producer ve Consumer kodu minimal değişiklikle reactive olarak çalışabilir.</p>
                                <p class="mt-2">Spring Cloud Stream dependency ekleme:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// build.gradle
implementation 'org.springframework.cloud:spring-cloud-starter-stream-kafka'
// veya RabbitMQ için
implementation 'org.springframework.cloud:spring-cloud-starter-stream-rabbit'</pre>
                                <p class="mt-2">Stream konfigürasyonu (application.yml):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
spring:
  cloud:
    stream:
      bindings:
        output:
          destination: order-events
          producer:
            required-groups: notification-service
        input:
          destination: notification-events
          group: order-service
      kafka:
        binder:
          brokers: localhost:9092</pre>
                                <p class="mt-2">Producer oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
@EnableBinding(Source.class)
public class OrderEventProducer {
    
    @Autowired
    private Source source;
    
    public void sendOrderCreatedEvent(Order order) {
        OrderCreatedEvent event = new OrderCreatedEvent(
            order.getId(), 
            order.getUserId(), 
            order.getTotalAmount()
        );
        
        source.output().send(MessageBuilder.withPayload(event).build());
    }
}</pre>
                                <p class="mt-2">Consumer oluşturma:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
@EnableBinding(Sink.class)
public class OrderEventConsumer {
    
    @StreamListener(target = Sink.INPUT)
    public void handleOrderCreatedEvent(OrderCreatedEvent event) {
        // Sipariş oluşturma event'ini işle
        // Örneğin bildirim gönder
        sendNotification(event.getUserId(), "Siparişiniz oluşturuldu");
    }
    
    private void sendNotification(Long userId, String message) {
        // Bildirim gönderme mantığı
    }
}</pre>
                                <p class="mt-2">Fonksiyonel programlama modeli:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@SpringBootApplication
public class Application {
    
    @Bean
    public Function<OrderCreatedEvent, NotificationEvent> processOrder() {
        return orderEvent -> {
            // Sipariş event'ini bildirim event'ine dönüştür
            return new NotificationEvent(
                orderEvent.getUserId(), 
                "Siparişiniz oluşturuldu: " + orderEvent.getOrderId()
            );
        };
    }
    
    @Bean
    public Consumer<NotificationEvent> sendNotification() {
        return notificationEvent -> {
            // Bildirim gönder
            System.out.println("Bildirim gönderiliyor: " + notificationEvent.getMessage());
        };
    }
}</pre>
                            </div>
                        </div>

                        <!-- Question 10 -->
                        <div class="question-card border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">Microservice architecture'da Kafka + Redis + ElasticSearch nasıl kullanılır?</h4>
                                <button class="toggle-answer text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-chevron-down rotate-icon"></i>
                                </button>
                            </div>
                            <div class="answer mt-2 text-gray-600 text-sm">
                                <p><strong>Kafka:</strong> Event streaming / messaging</p>
                                <p><strong>Redis:</strong> Cache / pub-sub / lightweight async</p>
                                <p><strong>ElasticSearch:</strong> Search / analytics</p>
                                <p><strong>Spring Cloud:</strong> Service discovery + config management</p>
                                <p>Circuit breaker + backpressure + reactive WebFlux → fault tolerance ve scalability.</p>
                                <p class="mt-2">Mimari örneği:</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
// User Service
@Service
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    @Autowired
    private KafkaTemplate<String, Object> kafkaTemplate;
    
    @Autowired
    private ElasticsearchOperations elasticsearchOperations;
    
    public User createUser(User user) {
        // Veritabanına kaydet
        User savedUser = userRepository.save(user);
        
        // Redis cache'e yaz
        redisTemplate.opsForValue().set("user:" + savedUser.getId(), savedUser, 1, TimeUnit.HOURS);
        
        // ElasticSearch'e indexle
        elasticsearchOperations.save(savedUser);
        
        // UserCreatedEvent'i Kafka'ya gönder
        UserCreatedEvent event = new UserCreatedEvent(savedUser.getId(), savedUser.getName());
        kafkaTemplate.send("user-events", event);
        
        return savedUser;
    }
    
    public User getUserById(Long id) {
        // Önce Redis cache'ten kontrol et
        User user = (User) redisTemplate.opsForValue().get("user:" + id);
        
        if (user == null) {
            // Cache'te yoksa veritabanından çek
            user = userRepository.findById(id).orElseThrow(() -> new UserNotFoundException(id));
            
            // Redis cache'e yaz
            redisTemplate.opsForValue().set("user:" + id, user, 1, TimeUnit.HOURS);
        }
        
        return user;
    }
    
    public Page<User> searchUsers(String query, Pageable pageable) {
        // ElasticSearch ile arama yap
        NativeSearchQuery searchQuery = new NativeSearchQueryBuilder()
            .withQuery(QueryBuilders.matchQuery("name", query))
            .withPageable(pageable)
            .build();
        
        SearchHits<User> searchHits = elasticsearchOperations.search(searchQuery, User.class);
        
        List<User> users = searchHits.getSearchHits().stream()
            .map(SearchHit::getContent)
            .collect(Collectors.toList());
        
        return new PageImpl<>(users, pageable, searchHits.getTotalHits());
    }
}</pre>
                                <p class="mt-2">Order Service (event-driven):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
public class OrderService {
    
    @Autowired
    private OrderRepository orderRepository;
    
    @Autowired
    private UserClient userClient;  // Feign client
    
    @Autowired
    private KafkaTemplate<String, Object> kafkaTemplate;
    
    @CircuitBreaker(name = "userService", fallbackMethod = "fallbackGetUser")
    public Order createOrder(Order order) {
        // User service'ten kullanıcı bilgilerini al
        User user = userClient.getUserById(order.getUserId());
        
        // Siparişi oluştur
        order.setUser(user);
        Order savedOrder = orderRepository.save(order);
        
        // OrderCreatedEvent'i Kafka'ya gönder
        OrderCreatedEvent event = new OrderCreatedEvent(
            savedOrder.getId(), 
            savedOrder.getUserId(), 
            savedOrder.getTotalAmount()
        );
        kafkaTemplate.send("order-events", event);
        
        return savedOrder;
    }
    
    public Order fallbackGetUser(Long userId, Exception e) {
        // Fallback mantığı
        Order order = new Order();
        order.setUserId(userId);
        order.setDescription("Fallback order - user service unavailable");
        return order;
    }
}</pre>
                                <p class="mt-2">Notification Service (Kafka consumer):</p>
                                <pre class="bg-gray-800 text-green-400 p-3 rounded-md overflow-x-auto text-sm mt-2">
@Service
public class NotificationService {
    
    @Autowired
    private NotificationRepository notificationRepository;
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    @KafkaListener(topics = "user-events", groupId = "notification-service")
    public void handleUserCreatedEvent(UserCreatedEvent event) {
        // Kullanıcı oluşturma event'ini işle
        Notification notification = new Notification();
        notification.setUserId(event.getUserId());
        notification.setMessage("Hoş geldin, " + event.getUserName() + "!");
        notification.setCreatedAt(LocalDateTime.now());
        
        notificationRepository.save(notification);
        
        // Redis pub/sub ile bildirim gönder
        redisTemplate.convertAndSend("notifications:" + event.getUserId(), notification);
    }
    
    @KafkaListener(topics = "order-events", groupId = "notification-service")
    public void handleOrderCreatedEvent(OrderCreatedEvent event) {
        // Sipariş oluşturma event'ini işle
        Notification notification = new Notification();
        notification.setUserId(event.getUserId());
        notification.setMessage("Siparişiniz başarıyla oluşturuldu. Sipariş ID: " + event.getOrderId());
        notification.setCreatedAt(LocalDateTime.now());
        
        notificationRepository.save(notification);
        
        // Redis pub/sub ile bildirim gönder
        redisTemplate.convertAndSend("notifications:" + event.getUserId(), notification);
    }
}</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Section -->
        <div class="mt-12 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">İstatistikler</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-blue-50 rounded-lg p-4 text-center">
                    <div class="text-3xl font-bold text-blue-600">250+</div>
                    <div class="text-gray-600">Toplam Soru</div>
                </div>
                <div class="bg-green-50 rounded-lg p-4 text-center">
                    <div class="text-3xl font-bold text-green-600">6</div>
                    <div class="text-gray-600">Kategori</div>
                </div>
                <div class="bg-yellow-50 rounded-lg p-4 text-center">
                    <div class="text-3xl font-bold text-yellow-600">Senior</div>
                    <div class="text-gray-600">Seviye</div>
                </div>
                <div class="bg-purple-50 rounded-lg p-4 text-center">
                    <div class="text-3xl font-bold text-purple-600">100%</div>
                    <div class="text-gray-600">Cevaplanma</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 py-6 border-t border-gray-200 text-center text-gray-600">
            <p>© 2023 Senior Developer Mülakat Soruları. Tüm hakları saklıdır.</p>
            <p class="mt-2">Docker, Kubernetes, Kafka, Redis, ElasticSearch ve Spring Boot konularında hazırlanmıştır.</p>
        </footer>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Toggle answer functionality
            const toggleButtons = document.querySelectorAll('.toggle-answer');
            toggleButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const answer = this.closest('.question-card').querySelector('.answer');
                    const icon = this.querySelector('.rotate-icon');

                    answer.classList.toggle('active');
                    icon.classList.toggle('active');
                });
            });

            // Category filter functionality
            const categoryButtons = document.querySelectorAll('.category-btn');
            const categoryCards = document.querySelectorAll('.category-card');

            categoryButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const category = this.getAttribute('data-category');

                    // Update active button
                    categoryButtons.forEach(btn => {
                        btn.classList.remove('bg-blue-600', 'text-white');
                        btn.classList.add('bg-gray-200', 'text-gray-700');
                    });
                    this.classList.remove('bg-gray-200', 'text-gray-700');
                    this.classList.add('bg-blue-600', 'text-white');

                    // Filter cards
                    categoryCards.forEach(card => {
                        if (category === 'all' || card.getAttribute('data-category') === category) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });

            // Search functionality
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function () {
                const searchTerm = this.value.toLowerCase();
                const questionCards = document.querySelectorAll('.question-card');

                questionCards.forEach(card => {
                    const questionText = card.querySelector('h4').textContent.toLowerCase();
                    const answerText = card.querySelector('.answer').textContent.toLowerCase();

                    if (questionText.includes(searchTerm) || answerText.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            // Dark mode toggle (placeholder functionality)
            const darkModeToggle = document.getElementById('toggleDarkMode');
            darkModeToggle.addEventListener('click', function () {
                document.body.classList.toggle('dark-mode');
                const icon = this.querySelector('i');
                if (icon.classList.contains('fa-moon')) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                }
            });
        });
    </script>
</body>

</html>
