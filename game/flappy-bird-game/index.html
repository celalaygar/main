<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flappy Bird</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      overflow: hidden;
      touch-action: manipulation;
    }

    #gameCanvas {
      background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
    }
  </style>
</head>

<body class="flex items-center justify-center min-h-screen bg-gray-100">

  <div class="relative">
    <canvas id="gameCanvas" width="360" height="640"></canvas>
    <div id="startScreen"
      class="absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white">
      <h1 class="text-3xl font-bold mb-4">Flappy Bird</h1>
      <button id="startButton" class="px-6 py-3 bg-green-500 rounded-full text-xl font-semibold">Başla</button>
    </div>
    <div id="gameOverScreen"
      class="absolute inset-0 hidden flex-col items-center justify-center bg-black bg-opacity-50 text-white">
      <h2 class="text-2xl font-bold mb-2">Oyun Bitti!</h2>
      <p class="text-xl mb-4">Skor: <span id="finalScore">0</span></p>
      <button id="restartButton" class="px-6 py-3 bg-red-500 rounded-full text-xl font-semibold">Yeniden Başla</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const startScreen = document.getElementById('startScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const startButton = document.getElementById('startButton');
    const restartButton = document.getElementById('restartButton');
    const finalScoreEl = document.getElementById('finalScore');

    // Oyun değişkenleri
    let bird = { x: 50, y: canvas.height / 2, width: 30, height: 30, gravity: 0.2, velocity: 0, jump: -5 };
    let pipes = [];
    let score = 0;
    let gameRunning = false;
    let frameCount = 0;
    const pipeWidth = 60;
    const pipeGap = 180;
    const pipeSpeed = 3;

    // Başlatma
    startButton.addEventListener('click', startGame);
    restartButton.addEventListener('click', startGame);

    function startGame() {
      bird.y = canvas.height / 2;
      bird.velocity = 0;
      pipes = [];
      score = 0;
      gameRunning = true;
      startScreen.classList.add('hidden');
      gameOverScreen.classList.add('hidden');
      frameCount = 0;
      loop();
    }

    // Zıplama
    function jump() {
      if (gameRunning) bird.velocity = bird.jump;
    }

    canvas.addEventListener('click', jump);
    window.addEventListener('keydown', (e) => {
      if (e.code === 'Space') jump();
    });

    // Ana oyun döngüsü
    function loop() {
      if (!gameRunning) return;

      update();
      draw();

      requestAnimationFrame(loop);
    }

    function update() {
      // Kuş
      bird.velocity += bird.gravity;
      bird.y += bird.velocity;

      // Yer veya gökyüzü çarpışma
      if (bird.y + bird.height >= canvas.height || bird.y <= 0) {
        gameOver();
        return;
      }

      // Borular
      if (frameCount % 100 === 0) {
        const gapY = Math.floor(Math.random() * (canvas.height - pipeGap - 20)) + 10;
        pipes.push({
          x: canvas.width,
          y: gapY,
          passed: false
        });
      }

      // Boruları hareket ettir
      pipes.forEach((pipe, index) => {
        pipe.x -= pipeSpeed;

        // Skor
        if (!pipe.passed && pipe.x + pipeWidth < bird.x) {
          pipe.passed = true;
          score++;
        }

        // Çarpışma kontrolü
        if (
          bird.x + bird.width > pipe.x &&
          bird.x < pipe.x + pipeWidth &&
          (bird.y < pipe.y || bird.y + bird.height > pipe.y + pipeGap)
        ) {
          gameOver();
        }

        // Ekrandan çıkan boruları kaldır
        if (pipe.x + pipeWidth < 0) {
          pipes.splice(index, 1);
        }
      });

      frameCount++;
    }

    function draw() {
      // Arka plan
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Kuş
      ctx.fillStyle = '#FFD700';
      ctx.fillRect(bird.x, bird.y, bird.width, bird.height);

      // Borular
      ctx.fillStyle = '#228B22';
      pipes.forEach(pipe => {
        ctx.fillRect(pipe.x, 0, pipeWidth, pipe.y);
        ctx.fillRect(pipe.x, pipe.y + pipeGap, pipeWidth, canvas.height);
      });

      // Skor
      ctx.fillStyle = '#FFF';
      ctx.font = '24px Arial';
      ctx.fillText(`Skor: ${score}`, 10, 30);
    }

    function gameOver() {
      gameRunning = false;
      finalScoreEl.textContent = score;
      gameOverScreen.classList.remove('hidden');
    }
  </script>
</body>

</html>
