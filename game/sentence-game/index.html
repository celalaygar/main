<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sentence Unscramble — Fill the Missing Word</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { -webkit-tap-highlight-color: transparent; }
    .letter-tile {
      width: 44px;
      height: 44px;
      min-width:44px;
      min-height:44px;
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      font-size:1.05rem;
      user-select:none;
      cursor:pointer;
    }
    .letter-tile.held { opacity: 0.45; transform: scale(.98); }
    .slot {
      min-width: 44px;
      min-height:44px;
      border-radius:8px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      background: rgba(255,255,255,0.04);
    }
    @media (max-width:640px){
      .letter-tile, .slot { width:40px; height:40px; min-width:40px; min-height:40px; font-size:0.95rem; }
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 text-slate-100 flex items-center justify-center p-4">

  <div class="w-full max-w-4xl">
    <header class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4">
      <div>
        <h1 class="text-2xl font-bold">Sentence Unscramble — Fill the Missing Word</h1>
        <p class="text-sm text-slate-300 mt-1">Unscramble the scrambled letters to complete the sentence. Tap letters or type your answer.</p>
      </div>

      <div class="flex items-center gap-3 mt-3 sm:mt-0">
        <div class="bg-white/5 px-3 py-2 rounded-md text-sm">Score: <span id="score">0</span></div>
        <div class="bg-white/5 px-3 py-2 rounded-md text-sm">Correct: <span id="correct">0</span></div>
        <div class="bg-white/5 px-3 py-2 rounded-md text-sm">Skipped: <span id="skips">0</span></div>
        <div class="bg-white/5 px-3 py-2 rounded-md text-sm">Progress: <span id="index">1</span>/<span id="total">100</span></div>
      </div>
    </header>

    <main class="bg-white/5 p-4 rounded-lg">
      <section class="mb-4">
        <div id="sentence" class="text-lg md:text-xl font-medium leading-relaxed"></div>
      </section>

      <section class="mb-4">
        <div class="flex flex-wrap gap-2 items-center mb-3">
          <div id="slots" class="flex gap-2 flex-wrap"></div>
        </div>

        <div class="flex items-center gap-2 mb-2">
          <input id="textInput" type="text" placeholder="Or type your answer here" class="flex-1 p-2 rounded-md bg-slate-900 border border-white/6 focus:outline-none" />
          <button id="checkBtn" class="px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-black rounded-md">Check</button>
        </div>

        <div class="mb-3">
          <div id="letters" class="flex flex-wrap gap-2"></div>
        </div>

        <div class="flex gap-2">
          <button id="shuffleBtn" class="px-3 py-2 bg-slate-700 hover:bg-slate-600 rounded-md">Shuffle</button>
          <button id="skipBtn" class="px-3 py-2 bg-yellow-500 hover:bg-yellow-600 rounded-md">Skip (-5)</button>
          <button id="revealBtn" class="px-3 py-2 bg-red-600 hover:bg-red-700 rounded-md">Reveal (end)</button>
          <button id="nextBtn" class="ml-auto px-3 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md">Next</button>
        </div>

        <p id="feedback" class="mt-3 text-sm h-6"></p>
      </section>

      <section class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-4 text-sm text-slate-300">
        <div>
          Tip: Tap letter tiles to place them into the blanks. Tap placed letters to remove them back to the pool.
        </div>
        <div class="text-right">
          Built for mobile — swipe won’t be necessary. Works with typing too.
        </div>
      </section>
    </main>
  </div>

<script>
/* Sentence completion game
   - 100 sentences list: each item { sentence: '...', answer: 'word' }
   - Sentence contains a placeholder token '____' where the word should be inserted.
   - Game shows scrambled letters as tiles. Player taps tiles to populate slots or types answer.
   - Scoring: +10 correct, -5 skip (min 0).
*/

const sentences = [
  { sentence: "Her grandmother's ____ nature made her beloved in the neighborhood.", answer: "benevolent" },
  { sentence: "Smartphones have become ____ in almost every household.", answer: "ubiquitous" },
  { sentence: "They reached a ____ agreement after hours of negotiation.", answer: "tentative" },
  { sentence: "The painting's colors were incredibly ____ in the dim light.", answer: "subtle" },
  { sentence: "The scientist provided a ____ explanation of the phenomenon.", answer: "comprehensive" },
  { sentence: "His ____ behavior made the whole team uncomfortable.", answer: "erratic" },
  { sentence: "The company faced a serious ____ after the data leak.", answer: "repercussion" },
  { sentence: "She had a ____ grasp of quantum mechanics.", answer: "profound" },
  { sentence: "The chef used a ____ blend of spices in the dish.", answer: "meticulous" },
  { sentence: "His performance was ____ and moved everyone to tears.", answer: "poignant" },

  { sentence: "The archaeologists uncovered an ____ artifact at the site.", answer: "ancient" },
  { sentence: "We need a ____ plan to tackle the upcoming project.", answer: "strategic" },
  { sentence: "Her ____ voice filled the concert hall.", answer: "resonant" },
  { sentence: "The novel's plot was delightfully ____ with mystery.", answer: "intricate" },
  { sentence: "A ____ of volunteers arrived to help with cleanup.", answer: "cohort" },
  { sentence: "The new policy aims to ____ economic growth.", answer: "stimulate" },
  { sentence: "They were ____ by the politician's evasive answers.", answer: "perplexed" },
  { sentence: "The poet's imagery was elegant and ____.", answer: "evocative" },
  { sentence: "He displayed remarkable ____ under pressure.", answer: "resilience" },
  { sentence: "Her argument was both logical and ____.", answer: "persuasive" },

  { sentence: "The committee will ____ the proposal next week.", answer: "scrutinize" },
  { sentence: "The sky was covered in ____ clouds before the storm.", answer: "ominous" },
  { sentence: "They sought to ____ the problem with a creative solution.", answer: "ameliorate" },
  { sentence: "The historian gave a ____ account of ancient wars.", answer: "meticulous" },
  { sentence: "His remarks were meant to ____ tensions between groups.", answer: "defuse" },
  { sentence: "The device's functions are remarkably ____.", answer: "sophisticated" },
  { sentence: "The jury remained ____ even after new evidence.", answer: "unbiased" },
  { sentence: "Children often show a natural sense of ____ in play.", answer: "curiosity" },
  { sentence: "The program was designed to ____ literacy among adults.", answer: "promote" },
  { sentence: "That explanation is ____ to the problem at hand.", answer: "irrelevant" },

  { sentence: "Her ____ attention to detail saved the company money.", answer: "meticulous" },
  { sentence: "The committee issued a ____ statement condemning the act.", answer: "resolute" },
  { sentence: "The actor's ____ portrayal won him praise.", answer: "nuanced" },
  { sentence: "The landscape offered a ____ view across the valley.", answer: "panoramic" },
  { sentence: "The teacher's ____ approach helped struggling students.", answer: "innovative" },
  { sentence: "They ____ the old bridge to ensure safety.", answer: "reinforced" },
  { sentence: "The contract contained a ____ clause on confidentiality.", answer: "stringent" },
  { sentence: "He gave a ____ apology after realizing his mistake.", answer: "sincere" },
  { sentence: "The phenomenon appears to be ____ to coastal regions.", answer: "peculiar" },
  { sentence: "Her ____ demeanor calmed the anxious group.", answer: "placid" },

  { sentence: "The medicine had a ____ effect on symptoms.", answer: "temporary" },
  { sentence: "We must ____ the data before drawing conclusions.", answer: "validate" },
  { sentence: "The detective noticed many ____ details at the scene.", answer: "subtle" },
  { sentence: "Their ____ for the environment inspired many.", answer: "advocacy" },
  { sentence: "The musician delivered a ____ solo performance.", answer: "virtuoso" },
  { sentence: "The town experienced an unexpected ____ in tourism.", answer: "surge" },
  { sentence: "Her ____ intellect amazed everyone in the seminar.", answer: "astute" },
  { sentence: "The landscape was marked by ____ geological features.", answer: "distinctive" },
  { sentence: "They designed the building to be highly ____.", answer: "efficient" },
  { sentence: "The rumor turned out to be ____.", answer: "baseless" },

  { sentence: "They faced a ____ challenge during the expedition.", answer: "formidable" },
  { sentence: "The artist's style is defiantly ____ and original.", answer: "idiosyncratic" },
  { sentence: "We must be ____ about our financial decisions.", answer: "prudent" },
  { sentence: "The waiter had ____ service during the evening.", answer: "exemplary" },
  { sentence: "She offered a ____ critique of the paper.", answer: "constructive" },
  { sentence: "The city has a ____ array of cultural venues.", answer: "diverse" },
  { sentence: "Her memory for names is amazingly ____.", answer: "remarkable" },
  { sentence: "The conclusions were based on ____ analysis.", answer: "rigorous" },
  { sentence: "He had a ____ understanding of algorithms.", answer: "proficient" },
  { sentence: "The manufacturer issues ____ recalls from time to time.", answer: "periodic" },

  { sentence: "They studied the ____ behavior of the species.", answer: "migratory" },
  { sentence: "His dismissal seemed rather ____. (unexpected and unfair)", answer: "arbitrary" },
  { sentence: "The lecture was full of ____ insights.", answer: "profound" },
  { sentence: "The contract was ____ and difficult to interpret.", answer: "ambiguous" },
  { sentence: "This invention could ____ how we communicate.", answer: "transform" },
  { sentence: "Her ____ remarks made everyone laugh politely.", answer: "witty" },
  { sentence: "The engineer's approach was methodical and ____. ", answer: "systematic" },
  { sentence: "The experiment's outcome was highly ____. (not what we expected)", answer: "anomalous" },
  { sentence: "He took a ____ interest in community projects.", answer: "keen" },
  { sentence: "They reached an ____ compromise after negotiations.", answer: "equitable" },

  { sentence: "The medication is ____. (able to be used safely)", answer: "viable" },
  { sentence: "A ____ of witnesses corroborated the story.", answer: "plethora" },
  { sentence: "The speaker's tone was ____, yet calming.", answer: "measured" },
  { sentence: "The dish had a ____ taste from herbs and citrus.", answer: "zesty" },
  { sentence: "The policy changes were implemented ____.", answer: "gradually" },
  { sentence: "Their work displayed ____ accuracy and care.", answer: "meticulous" },
  { sentence: "The city is known for its ____ skyline.", answer: "iconic" },
  { sentence: "The scientist's findings were ____ by peers.", answer: "validated" },
  { sentence: "She had an ____ appetite for learning.", answer: "insatiable" },
  { sentence: "The landscape was ____ with wildflowers in spring.", answer: "abundant" },

  { sentence: "The candidate's platform seemed ____. (too good to be true)", answer: "implausible" },
  { sentence: "They invested in a ____ startup with promise.", answer: "promising" },
  { sentence: "His reaction was quick and ____.", answer: "decisive" },
  { sentence: "The movie's theme was unexpectedly ____.", answer: "poignant" },
  { sentence: "Her demeanor remained ____ throughout the ordeal.", answer: "composed" },
  { sentence: "The team's ____ efforts paid off in the end.", answer: "concerted" },
  { sentence: "The artifact is ____ to the 18th century.", answer: "attributed" },
  { sentence: "The volunteer work was deeply ____. (emotionally moving)", answer: "meaningful" },
  { sentence: "The technology requires ____ infrastructure.", answer: "robust" },
  { sentence: "The economist provided ____ forecasts for growth.", answer: "optimistic" },

  { sentence: "The child's ____ curiosity led to many discoveries.", answer: "boundless" },
  { sentence: "The concept was ____, not yet practical for production.", answer: "theoretical" },
  { sentence: "Her explanation was clear and ____.", answer: "succinct" },
  { sentence: "They encountered ____ resistance to the plan.", answer: "stiff" },
  { sentence: "The research yielded ____ results after long trials.", answer: "conclusive" },
  { sentence: "The sculpture's form was elegantly ____.", answer: "abstract" },
  { sentence: "His claims were ____ by the available evidence.", answer: "substantiated" },
  { sentence: "The pilot handled the emergency with ____ skill.", answer: "admirable" },
  { sentence: "The committee demanded ____ transparency.", answer: "greater" },
  { sentence: "They had a ____ appreciation for traditional music.", answer: "deep" }
];

// game variables
let index = 0;
let total = sentences.length;
let score = 0;
let correct = 0;
let skips = 0;

const sentenceEl = document.getElementById('sentence');
const lettersEl = document.getElementById('letters');
const slotsEl = document.getElementById('slots');
const textInput = document.getElementById('textInput');
const checkBtn = document.getElementById('checkBtn');
const shuffleBtn = document.getElementById('shuffleBtn');
const skipBtn = document.getElementById('skipBtn');
const revealBtn = document.getElementById('revealBtn');
const nextBtn = document.getElementById('nextBtn');
const feedbackEl = document.getElementById('feedback');

const scoreEl = document.getElementById('score');
const correctEl = document.getElementById('correct');
const skipsEl = document.getElementById('skips');
const indexEl = document.getElementById('index');
const totalEl = document.getElementById('total');

totalEl.textContent = total;

function shuffleArray(a){
  for (let i = a.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function prepareWord(word){
  // Normalize: remove surrounding punctuation but preserve internal hyphens/apostrophes
  // We'll treat answer as lowercase
  return word.toLowerCase();
}

function scramble(word){
  const arr = word.split('');
  shuffleArray(arr);
  // if scramble equals original, reshuffle
  if (arr.join('') === word && word.length > 1) shuffleArray(arr);
  return arr;
}

let activeTiles = []; // objects {char, id, used}
let placed = []; // array of placed tile ids or null

function renderSentence(){
  const obj = sentences[index];
  sentenceEl.innerHTML = obj.sentence.replace('____', `<span class="text-amber-400 font-semibold">____</span>`);
  indexEl.textContent = index + 1;
}

function buildTilesAndSlots(){
  const ans = prepareWord(sentences[index].answer);
  // remove spaces in multi-word answers; but show slots including space markers
  const cleaned = ans.replace(/\s+/g, ' '); // preserve single spaces
  const letters = cleaned.split('');
  // For scrambled tiles, remove spaces (spaces won't be tiles)
  const tileChars = letters.filter(ch => ch !== ' ');
  const scrambled = scramble(tileChars.slice());
  activeTiles = scrambled.map((ch,i)=> ({ char: ch, id: `t${i}`, used:false }));
  placed = Array.from({length: tileChars.length}, ()=> null);

  renderTiles();
  renderSlots(letters);
  textInput.value = '';
  feedbackEl.textContent = '';
}

function renderTiles(){
  lettersEl.innerHTML = '';
  activeTiles.forEach(tile => {
    const btn = document.createElement('div');
    btn.className = 'letter-tile bg-slate-800 text-slate-100 shadow-sm';
    if (tile.used) btn.classList.add('held');
    btn.textContent = tile.char.toUpperCase();
    btn.dataset.id = tile.id;
    btn.addEventListener('click', ()=> {
      onTileClick(tile.id);
    });
    lettersEl.appendChild(btn);
  });
}

function renderSlots(letterArray){
  slotsEl.innerHTML = '';
  // letterArray includes spaces where applicable: we show slot or space
  let slotIndex = 0;
  letterArray.forEach(ch => {
    if (ch === ' '){
      const spacer = document.createElement('div');
      spacer.className = 'px-2';
      spacer.innerHTML = '&nbsp;';
      slotsEl.appendChild(spacer);
    } else {
      const slot = document.createElement('div');
      slot.className = 'slot border border-white/6 px-2';
      slot.dataset.pos = slotIndex;
      slot.addEventListener('click', ()=> {
        // if letter placed here, remove it
        removePlacedAt(slotIndex);
      });
      const content = document.createElement('div');
      content.className = 'slot-content';
      content.style.minWidth = '32px';
      content.style.textAlign = 'center';
      content.style.color = '#e6e7e9';
      content.style.fontWeight = '700';
      content.style.userSelect = 'none';
      content.textContent = '';
      slot.appendChild(content);
      slotsEl.appendChild(slot);
      slotIndex++;
    }
  });
}

function onTileClick(tileId){
  const tile = activeTiles.find(t => t.id === tileId);
  if (!tile) return;
  if (tile.used){
    // find placed index and remove
    const pos = placed.indexOf(tileId);
    if (pos >= 0) removePlacedAt(pos);
    return;
  }
  // find first empty slot
  const pos = placed.indexOf(null);
  if (pos === -1) return; // no room
  placed[pos] = tileId;
  tile.used = true;
  updateSlotsUI();
  renderTiles();
  updateTextInputFromPlaced();
}

function removePlacedAt(pos){
  if (pos < 0 || pos >= placed.length) return;
  const tileId = placed[pos];
  if (!tileId) return;
  const tile = activeTiles.find(t => t.id === tileId);
  if (tile) tile.used = false;
  placed[pos] = null;
  updateSlotsUI();
  renderTiles();
  updateTextInputFromPlaced();
}

function updateSlotsUI(){
  const slotDivs = Array.from(slotsEl.querySelectorAll('.slot'));
  slotDivs.forEach((slotDiv, i) => {
    const content = slotDiv.querySelector('.slot-content');
    const id = placed[i];
    if (id){
      const tile = activeTiles.find(t=>t.id===id);
      content.textContent = tile ? tile.char.toUpperCase() : '';
    } else {
      content.textContent = '';
    }
  });
}

function updateTextInputFromPlaced(){
  // set text input to placed sequence
  const letters = placed.map(id => {
    if (!id) return '';
    const t = activeTiles.find(tt => tt.id === id);
    return t ? t.char : '';
  });
  textInput.value = letters.join('');
}

function populatePlacedFromText(){
  // when user types text, update placed if possible (accept only letters)
  const raw = textInput.value.toLowerCase().replace(/[^a-z'-]/g,'');
  // if raw length differs from slots capacity, ignore extra
  const capacity = placed.length;
  const arr = raw.slice(0, capacity).split('');
  // reset used flags
  activeTiles.forEach(t=> t.used = false);
  placed = Array.from({length: capacity}, ()=> null);
  // for each letter in arr, find first unused tile matching that letter
  arr.forEach((ch, idx) => {
    const tile = activeTiles.find(t => !t.used && t.char === ch);
    if (tile){
      tile.used = true;
      placed[idx] = tile.id;
    } else {
      // letter not found among tiles -> leave blank
    }
  });
  renderTiles();
  updateSlotsUI();
}

textInput.addEventListener('input', ()=>{
  populatePlacedFromText();
});

checkBtn.addEventListener('click', ()=> checkAnswer(false));
shuffleBtn.addEventListener('click', ()=> {
  // reshuffle unused tiles
  const unused = activeTiles.filter(t=>!t.used).map(t=>t.char);
  shuffleArray(unused);
  // rebuild activeTiles: keep placement the same but reorder unused pool
  let ui = 0;
  activeTiles.forEach(t=> {
    if (!t.used){
      t.char = unused[ui++];
    }
  });
  renderTiles();
  feedbackEl.textContent = 'Shuffled.';
  setTimeout(()=> feedbackEl.textContent = '', 900);
});
skipBtn.addEventListener('click', ()=> {
  skips++;
  score = Math.max(0, score - 5);
  updateStats();
  feedbackEl.textContent = 'Skipped. -5 points';
  setTimeout(()=> feedbackEl.textContent = '', 1000);
  nextItem();
});
revealBtn.addEventListener('click', ()=> {
  // reveal the answer and mark no points
  feedbackEl.innerHTML = `Answer: <span class="font-semibold text-amber-300">${sentences[index].answer}</span>`;
  // fill slots visually
  autoFillAnswer();
});
nextBtn.addEventListener('click', ()=> {
  nextItem();
});

// check function
function checkAnswer(forceReveal){
  const userAnswer = (textInput.value || getPlacedString()).toLowerCase().trim();
  const correctAns = sentences[index].answer.toLowerCase();
  if (userAnswer === correctAns){
    score += 10;
    correct++;
    feedbackEl.textContent = 'Correct! +10';
    updateStats();
    setTimeout(()=> {
      nextItem();
    }, 800);
  } else {
    feedbackEl.textContent = 'Incorrect — try again or Skip.';
  }
}

// helper to get placed string
function getPlacedString(){
  return placed.map(id => {
    if (!id) return '';
    const t = activeTiles.find(tt => tt.id===id);
    return t ? t.char : '';
  }).join('');
}

function autoFillAnswer(){
  const ans = prepareWord(sentences[index].answer);
  // fill placed and used accordingly
  const chars = ans.replace(/\s+/g,' ').split('').filter(ch => ch !== ' ');
  // try to assign tiles to match correct order if letters available
  activeTiles.forEach(t=> t.used = false);
  placed = Array.from({length: chars.length}, ()=> null);
  for (let i=0;i<chars.length;i++){
    const ch = chars[i];
    const tile = activeTiles.find(t => !t.used && t.char === ch);
    if (tile){
      tile.used = true;
      placed[i] = tile.id;
    } else {
      // if missing (shouldn't happen), create a temp tile visually (skip)
    }
  }
  renderTiles();
  updateSlotsUI();
}

function nextItem(){
  index++;
  if (index >= total){
    // game finished
    feedbackEl.innerHTML = `Game finished! Final score: <strong>${score}</strong>. You got ${correct} correct, skipped ${skips}.`;
    updateStats();
    // disable UI
    sentenceEl.textContent = 'All done — well played!';
    lettersEl.innerHTML = '';
    slotsEl.innerHTML = '';
    textInput.disabled = true;
    checkBtn.disabled = true;
    shuffleBtn.disabled = true;
    skipBtn.disabled = true;
    revealBtn.disabled = true;
    nextBtn.disabled = true;
    return;
  }
  renderSentence();
  buildTilesAndSlots();
  updateStats();
}

function updateStats(){
  scoreEl.textContent = score;
  correctEl.textContent = correct;
  skipsEl.textContent = skips;
  indexEl.textContent = Math.min(index+1, total);
}

// init first item
function startGameAt(i=0){
  index = i;
  score = 0; correct = 0; skips = 0;
  textInput.disabled = false;
  checkBtn.disabled = false;
  shuffleBtn.disabled = false;
  skipBtn.disabled = false;
  revealBtn.disabled = false;
  nextBtn.disabled = false;
  renderSentence();
  buildTilesAndSlots();
  updateStats();
}
startGameAt(0);

// small UX: allow tapping placed slot to remove last placed
slotsEl.addEventListener('click', (e)=> {
  // handled on individual slot click already
});

// keyboard support: Enter to check
textInput.addEventListener('keydown', (e)=> {
  if (e.key === 'Enter') {
    checkAnswer(false);
  }
});

</script>
</body>
</html>
