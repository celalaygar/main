<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Endless Runner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * {
      box-sizing: border-box;
    }
    canvas {
      background: linear-gradient(to top, #4facfe, #00f2fe);
      display: block;
      margin: auto;
      border: 4px solid white;
      border-radius: 10px;
    }
  </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4 select-none">

  <h1 class="text-3xl font-bold mb-4">üèÉ Endless Runner</h1>
  <p class="mb-2">Puan: <span id="score">0</span></p>
  <canvas id="gameCanvas" width="480" height="300"></canvas>
  <button id="startBtn" class="mt-4 px-6 py-2 bg-green-500 rounded-lg font-bold hover:bg-green-600 transition">Ba≈üla</button>
  <p class="mt-2 text-gray-300">Zƒ±plamak i√ßin Bo≈üluk veya Dokun</p>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");
    const startBtn = document.getElementById("startBtn");

    let player, obstacles, score, gameSpeed, gravity, isJumping, gameLoopId, playing;

    function resetGame() {
      player = { x: 50, y: 250, w: 30, h: 30, dy: 0 };
      obstacles = [];
      score = 0;
      gameSpeed = 3;
      gravity = 0.6;
      isJumping = false;
      playing = true;
      scoreEl.textContent = score;
    }

    function jump() {
      if (!isJumping) {
        player.dy = -10;
        isJumping = true;
      }
    }

    function spawnObstacle() {
      const height = 30;
      const width = 30;
      const x = canvas.width;
      const y = canvas.height - height;
      obstacles.push({ x, y, w: width, h: height });
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Player
      player.y += player.dy;
      player.dy += gravity;

      if (player.y + player.h >= canvas.height) {
        player.y = canvas.height - player.h;
        isJumping = false;
      }

      ctx.fillStyle = "#ffdd57";
      ctx.fillRect(player.x, player.y, player.w, player.h);

      // Obstacles
      for (let i = obstacles.length - 1; i >= 0; i--) {
        const obs = obstacles[i];
        obs.x -= gameSpeed;

        ctx.fillStyle = "#ff4d4d";
        ctx.fillRect(obs.x, obs.y, obs.w, obs.h);

        // Collision
        if (
          player.x < obs.x + obs.w &&
          player.x + player.w > obs.x &&
          player.y < obs.y + obs.h &&
          player.y + player.h > obs.y
        ) {
          playing = false;
        }

        // Remove passed obstacles
        if (obs.x + obs.w < 0) {
          obstacles.splice(i, 1);
          score++;
          scoreEl.textContent = score;
          if (score % 5 === 0) gameSpeed += 0.5;
        }
      }

      // Spawn obstacles
      if (Math.random() < 0.02) {
        spawnObstacle();
      }

      if (playing) {
        gameLoopId = requestAnimationFrame(update);
      } else {
        ctx.fillStyle = "white";
        ctx.font = "20px Arial";
        ctx.fillText("Oyun Bitti - Tekrar ba≈ülatmak i√ßin Ba≈üla", 20, canvas.height / 2);
      }
    }

    // Kontroller
    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") jump();
    });

    canvas.addEventListener("touchstart", () => {
      jump();
    });

    startBtn.addEventListener("click", () => {
      cancelAnimationFrame(gameLoopId);
      resetGame();
      update();
    });
  </script>
</body>
</html>
