<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flappy Bird - Tailwind + JS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(180deg, #6ee7b7, #3b82f6);
      -webkit-tap-highlight-color: transparent;
    }
    canvas {
      background: #87ceeb;
      border-radius: 12px;
      display: block;
      margin: 0 auto;
      box-shadow: 0 0 15px rgb(0 0 0 / 0.2);
    }
    .btn {
      @apply bg-green-500 hover:bg-green-600 text-white py-2 px-6 rounded-md font-semibold shadow-md transition;
    }
  </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6 select-none">

  <header class="flex items-center justify-center gap-6 mb-4">
    <h1 class="text-3xl font-bold text-white">Flappy Bird üê¶</h1>
    <div class="text-white text-lg font-mono bg-black bg-opacity-40 px-4 py-2 rounded-md select-none">
      Puan: <span id="score">0</span>
    </div> 
    <div class="text-white text-lg font-mono bg-black bg-opacity-40 px-4 py-2 rounded-md select-none">
      <button id="restartBtn" class="btn hidden">Yeniden Ba≈ülat</button>
    </div> 
    
  </header>

  <canvas id="gameCanvas" width="400" height="600" class="shadow-lg rounded-lg"></canvas>



  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const restartBtn = document.getElementById('restartBtn');

    const WIDTH = canvas.width;
    const HEIGHT = canvas.height;

    // Oyun deƒüi≈ükenleri
    let bird = {
      x: 80,
      y: HEIGHT / 2,
      width: 34,
      height: 24,
      velocity: 0,
      gravity: 0.5,
      lift: -8,
    };

    let pipes = [];
    let pipeWidth = 60;
    let pipeGap = 150;
    let pipeInterval = 1500; // ms
    let lastPipeTime = 0;

    let score = 0;
    let running = false;

    // Ba≈ülangƒ±√ß fonksiyonu
    function resetGame() {
      bird.y = HEIGHT / 2;
      bird.velocity = 0;
      pipes = [];
      score = 0;
      scoreEl.textContent = score;
      running = true;
      restartBtn.classList.add('hidden');
      lastPipeTime = performance.now();
      requestAnimationFrame(gameLoop);
    }

    // Boru olu≈ütur
    function createPipe() {
      const minHeight = 50;
      const maxHeight = HEIGHT - pipeGap - minHeight;
      const topHeight = Math.floor(Math.random() * (maxHeight - minHeight + 1)) + minHeight;
      pipes.push({
        x: WIDTH,
        topHeight,
        bottomY: topHeight + pipeGap,
        passed: false,
      });
    }

    // √áarpƒ±≈üma kontrol√º
    function collision(pipe) {
      // Ku≈üun kutu alanƒ±
      const bx = bird.x;
      const by = bird.y;
      const bw = bird.width;
      const bh = bird.height;

      // Boru √ºst
      if (
        bx + bw > pipe.x &&
        bx < pipe.x + pipeWidth &&
        by < pipe.topHeight
      ) return true;

      // Boru alt
      if (
        bx + bw > pipe.x &&
        bx < pipe.x + pipeWidth &&
        by + bh > pipe.bottomY
      ) return true;

      // Zemin ve tavan kontrol√º
      if (by < 0 || by + bh > HEIGHT) return true;

      return false;
    }

    // Ku≈üu √ßiz
    function drawBird() {
      ctx.fillStyle = '#facc15'; // sarƒ± ku≈ü
      ctx.beginPath();
      ctx.ellipse(bird.x + bird.width / 2, bird.y + bird.height / 2, bird.width / 2, bird.height / 2, 0, 0, Math.PI * 2);
      ctx.fill();
      // G√∂z
      ctx.fillStyle = '#000';
      ctx.beginPath();
      ctx.arc(bird.x + bird.width * 0.7, bird.y + bird.height * 0.3, 4, 0, Math.PI * 2);
      ctx.fill();
    }

    // Borularƒ± √ßiz
    function drawPipes() {
      ctx.fillStyle = '#059669'; // ye≈üil boru

      pipes.forEach(pipe => {
        // √úst boru
        ctx.fillRect(pipe.x, 0, pipeWidth, pipe.topHeight);
        // Alt boru
        ctx.fillRect(pipe.x, pipe.bottomY, pipeWidth, HEIGHT - pipe.bottomY);
      });
    }

    // Puan ve oyun d√∂ng√ºs√º
    function gameLoop(timestamp) {
      if (!running) return;

      ctx.clearRect(0, 0, WIDTH, HEIGHT);

      // Ku≈ü hareket
      bird.velocity += bird.gravity;
      bird.y += bird.velocity;

      // Borularƒ±n hareketi ve y√∂netimi
      if (timestamp - lastPipeTime > pipeInterval) {
        createPipe();
        lastPipeTime = timestamp;
      }

      pipes.forEach(pipe => {
        pipe.x -= 3;

        // Ku≈ü ge√ßerse puan artar
        if (!pipe.passed && pipe.x + pipeWidth < bird.x) {
          pipe.passed = true;
          score++;
          scoreEl.textContent = score;
        }
      });

      // Borularƒ± temizle (ekrandan √ßƒ±kƒ±nca)
      pipes = pipes.filter(pipe => pipe.x + pipeWidth > 0);

      drawPipes();
      drawBird();

      // √áarpƒ±≈üma kontrol√º
      for (let pipe of pipes) {
        if (collision(pipe)) {
          running = false;
          restartBtn.classList.remove('hidden');
          return;
        }
      }

      // Zemin ve tavan kontrol√º (oyun bitti)
      if (bird.y + bird.height > HEIGHT || bird.y < 0) {
        running = false;
        restartBtn.classList.remove('hidden');
        return;
      }

      requestAnimationFrame(gameLoop);
    }

    // Ku≈üu zƒ±plat
    function flap() {
      if (!running) return;
      bird.velocity = bird.lift;
    }

    // Eventler
    window.addEventListener('keydown', e => {
      if (e.code === 'Space' || e.code === 'ArrowUp') {
        flap();
        e.preventDefault();
      }
    });

    canvas.addEventListener('click', () => flap());

    restartBtn.addEventListener('click', () => {
      resetGame();
    });

    // Ba≈ülat
    resetGame();
  </script>
</body>
</html>
